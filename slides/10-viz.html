<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.19">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Dr.&nbsp;Cheng-Han Yu   Department of Mathematical and Statistical Sciences   Marquette University">
<title>Visualizing Data üìà ‚Äì MATH/COSC 3570 - Spring 2026</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-46eeb4c476de49ef7df495821a6125d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-38b22635d8ba2828809dae622215a440.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/live-runtime/live-runtime.js" type="module"></script>
<link href="../site_libs/quarto-contrib/live-runtime/live-runtime.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script type="module" src="../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script><link href="../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<meta property="og:title" content="Visualizing Data r emo::ji('chart_with_upwards_trend') ‚Äì MATH/COSC 3570 - Spring 2026">
<meta property="og:description" content="MATH/COSC 3570 Introduction to Data Science">
<meta property="og:image" content="https://math3570-s26.github.io/website/slides/images/10-viz/lending-club.png">
<meta property="og:site_name" content="MATH/COSC 3570 - Spring 2026">
<meta property="og:image:height" content="117">
<meta property="og:image:width" content="431">
</head>
<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Visualizing Data üìà</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/logo.png" alt="" class="sidebar-logo light-content py-0 d-lg-inline d-none"><img src="../images/logo.png" alt="" class="sidebar-logo dark-content py-0 d-lg-inline d-none"></a>
      <div class="sidebar-tools-main">
    <a href="https://github.com/math3570-s26" title="GitHub organization" class="quarto-navigation-tool px-1" aria-label="GitHub organization"><i class="bi bi-github"></i></a>
    <a href="https://d2l.mu.edu/d2l/home/630428" title="D2L" class="quarto-navigation-tool px-1" aria-label="D2L"><i class="bi bi-person-fill"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Course information</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">AI Activities</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ai_act_guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Guideline and Policy</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ai_example.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">AI Project Example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ai.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">AI Project Topics</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Mini Project</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topics and Works</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Final Project</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../present-description-final.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Guideline and Policy</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../present-work-final.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project Group and Proposal</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    <div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="10-viz-slides.html"><i class="bi bi-file-slides"></i>RevealJS (live)</a></li></ul></div></div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Visualizing Data üìà</h1>
<p class="subtitle lead">MATH/COSC 3570 Introduction to Data Science</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dr.&nbsp;Cheng-Han Yu <br> Department of Mathematical and Statistical Sciences <br> Marquette University </p>
          </div>
  </div>
    
  
    
  </div>
  


</header><section id="section" class="level1" data-visibility="hidden"><h1 data-visibility="hidden"></h1>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<section id="categorical-vs.-numerical-variables" class="level2"><h2 class="anchored" data-anchor-id="categorical-vs.-numerical-variables">Categorical vs.&nbsp;Numerical Variables</h2>
<ul>
<li>A <strong>categorical (qualitative)</strong> variable provides <em>non-numerical</em> information which can be placed in <strong>one (and only one)</strong> category from two or more categories.</li>
</ul>
<div class="fragment">
<ul>
<li><span style="color:blue">Gender (Male üë®, Female üë©, Other üè≥Ô∏è‚Äçüåà)</span></li>
<li><span style="color:blue">Class (Freshman, Sophomore, Junior, Senior, Graduate)</span></li>
<li><span style="color:blue">Country (USA üá∫üá∏, Canada üá®üá¶, UK üá¨üáß, Germany üá©üá™, Japan üáØüáµ, Korea üá∞üá∑)</span></li>
</ul>
</div>
<p>. . .</p>
<ul>
<li>A <strong>numerical (quantitative)</strong> variable is recorded in a <em>numerical</em> value representing counts or measurements.</li>
</ul>
<div class="fragment">
<ul>
<li><span style="color:blue">GPA</span></li>
<li><span style="color:blue">The number of relationships you‚Äôve had</span></li>
<li><span style="color:blue">Height</span></li>
</ul>
</div>
</section><section id="data-lending-club" class="level2"><h2 class="anchored" data-anchor-id="data-lending-club">Data: Lending Club</h2>
<ul>
<li><p><a href="https://www.lendingclub.com/">Lending Club</a> is a platform that allows individuals to lend to other individuals.</p></li>
<li><p><em>Not all loans are created equal</em> ‚Äì ease of getting a loan depends on ability to pay back the loan.</p></li>
<li><p>Data includes <strong>loans made</strong>, these are not loan applications.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="./images/10-viz/lending-club.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>OK. The data set we will be working with comes from the lending club.</li>
<li>Thousands of loans made through the Lending Club, which is a platform that allows individuals to lend to other individuals.</li>
<li>If you are finance or econ major, or you know about loans, you know that Not all loans are created equal ‚Äì ease of getting a loan depends on (apparent) ability to pay back the loan.</li>
<li>Data include loans <em>made</em>, these are not loan applications.</li>
<li>It‚Äôs important to keep this in mind when we are looking at the relationships between the variables that we are going to see, since the pattern may be different for those relationships for loans that never got approved.</li>
</ul>
</div>
</section><section id="take-a-peek-at-data" class="level2"><h2 class="anchored" data-anchor-id="take-a-peek-at-data">Take a Peek at Data</h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">library</span>(openintro) <span class="do">## for loading the data set</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(loans_full_schema)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre class="my_class800"><code>Rows: 10,000
Columns: 55
$ emp_title                        &lt;chr&gt; "global config engineer ", "warehouse‚Ä¶
$ emp_length                       &lt;dbl&gt; 3, 10, 3, 1, 10, NA, 10, 10, 10, 3, 1‚Ä¶
$ state                            &lt;fct&gt; NJ, HI, WI, PA, CA, KY, MI, AZ, NV, I‚Ä¶
$ homeownership                    &lt;fct&gt; MORTGAGE, RENT, RENT, RENT, RENT, OWN‚Ä¶
$ annual_income                    &lt;dbl&gt; 90000, 40000, 40000, 30000, 35000, 34‚Ä¶
$ verified_income                  &lt;fct&gt; Verified, Not Verified, Source Verifi‚Ä¶
$ debt_to_income                   &lt;dbl&gt; 18.01, 5.04, 21.15, 10.16, 57.96, 6.4‚Ä¶
$ annual_income_joint              &lt;dbl&gt; NA, NA, NA, NA, 57000, NA, 155000, NA‚Ä¶
$ verification_income_joint        &lt;fct&gt; , , , , Verified, , Not Verified, , ,‚Ä¶
$ debt_to_income_joint             &lt;dbl&gt; NA, NA, NA, NA, 37.7, NA, 13.1, NA, N‚Ä¶
$ delinq_2y                        &lt;int&gt; 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0‚Ä¶
$ months_since_last_delinq         &lt;int&gt; 38, NA, 28, NA, NA, 3, NA, 19, 18, NA‚Ä¶
$ earliest_credit_line             &lt;dbl&gt; 2001, 1996, 2006, 2007, 2008, 1990, 2‚Ä¶
$ inquiries_last_12m               &lt;int&gt; 6, 1, 4, 0, 7, 6, 1, 1, 3, 0, 4, 4, 8‚Ä¶
$ total_credit_lines               &lt;int&gt; 28, 30, 31, 4, 22, 32, 12, 30, 35, 9,‚Ä¶
$ open_credit_lines                &lt;int&gt; 10, 14, 10, 4, 16, 12, 10, 15, 21, 6,‚Ä¶
$ total_credit_limit               &lt;int&gt; 70795, 28800, 24193, 25400, 69839, 42‚Ä¶
$ total_credit_utilized            &lt;int&gt; 38767, 4321, 16000, 4997, 52722, 3898‚Ä¶
$ num_collections_last_12m         &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0‚Ä¶
$ num_historical_failed_to_pay     &lt;int&gt; 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0‚Ä¶
$ months_since_90d_late            &lt;int&gt; 38, NA, 28, NA, NA, 60, NA, 71, 18, N‚Ä¶
$ current_accounts_delinq          &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0‚Ä¶
$ total_collection_amount_ever     &lt;int&gt; 1250, 0, 432, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶
$ current_installment_accounts     &lt;int&gt; 2, 0, 1, 1, 1, 0, 2, 2, 6, 1, 2, 1, 2‚Ä¶
$ accounts_opened_24m              &lt;int&gt; 5, 11, 13, 1, 6, 2, 1, 4, 10, 5, 6, 7‚Ä¶
$ months_since_last_credit_inquiry &lt;int&gt; 5, 8, 7, 15, 4, 5, 9, 7, 4, 17, 3, 4,‚Ä¶
$ num_satisfactory_accounts        &lt;int&gt; 10, 14, 10, 4, 16, 12, 10, 15, 21, 6,‚Ä¶
$ num_accounts_120d_past_due       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, NA, 0, 0, 0, 0, ‚Ä¶
$ num_accounts_30d_past_due        &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0‚Ä¶
$ num_active_debit_accounts        &lt;int&gt; 2, 3, 3, 2, 10, 1, 3, 5, 11, 3, 2, 2,‚Ä¶
$ total_debit_limit                &lt;int&gt; 11100, 16500, 4300, 19400, 32700, 272‚Ä¶
$ num_total_cc_accounts            &lt;int&gt; 14, 24, 14, 3, 20, 27, 8, 16, 19, 7, ‚Ä¶
$ num_open_cc_accounts             &lt;int&gt; 8, 14, 8, 3, 15, 12, 7, 12, 14, 5, 8,‚Ä¶
$ num_cc_carrying_balance          &lt;int&gt; 6, 4, 6, 2, 13, 5, 6, 10, 14, 3, 5, 3‚Ä¶
$ num_mort_accounts                &lt;int&gt; 1, 0, 0, 0, 0, 3, 2, 7, 2, 0, 2, 3, 3‚Ä¶
$ account_never_delinq_percent     &lt;dbl&gt; 92.9, 100.0, 93.5, 100.0, 100.0, 78.1‚Ä¶
$ tax_liens                        &lt;int&gt; 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0‚Ä¶
$ public_record_bankrupt           &lt;int&gt; 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0‚Ä¶
$ loan_purpose                     &lt;fct&gt; moving, debt_consolidation, other, de‚Ä¶
$ application_type                 &lt;fct&gt; individual, individual, individual, i‚Ä¶
$ loan_amount                      &lt;int&gt; 28000, 5000, 2000, 21600, 23000, 5000‚Ä¶
$ term                             &lt;dbl&gt; 60, 36, 36, 36, 36, 36, 60, 60, 36, 3‚Ä¶
$ interest_rate                    &lt;dbl&gt; 14.07, 12.61, 17.09, 6.72, 14.07, 6.7‚Ä¶
$ installment                      &lt;dbl&gt; 652.5, 167.5, 71.4, 664.2, 786.9, 153‚Ä¶
$ grade                            &lt;ord&gt; C, C, D, A, C, A, C, B, C, A, C, B, C‚Ä¶
$ sub_grade                        &lt;fct&gt; C3, C1, D1, A3, C3, A3, C2, B5, C2, A‚Ä¶
$ issue_month                      &lt;fct&gt; Mar-2018, Feb-2018, Feb-2018, Jan-201‚Ä¶
$ loan_status                      &lt;fct&gt; Current, Current, Current, Current, C‚Ä¶
$ initial_listing_status           &lt;fct&gt; whole, whole, fractional, whole, whol‚Ä¶
$ disbursement_method              &lt;fct&gt; Cash, Cash, Cash, Cash, Cash, Cash, C‚Ä¶
$ balance                          &lt;dbl&gt; 27016, 4651, 1825, 18853, 21430, 4257‚Ä¶
$ paid_total                       &lt;dbl&gt; 1999, 499, 282, 3313, 2325, 873, 2731‚Ä¶
$ paid_principal                   &lt;dbl&gt; 984, 349, 175, 2747, 1570, 743, 1440,‚Ä¶
$ paid_interest                    &lt;dbl&gt; 1015.2, 150.5, 106.4, 566.1, 754.8, 1‚Ä¶
$ paid_late_fees                   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0‚Ä¶</code></pre>
</div>
</div>
<div class="notes">
<ul>
<li>The data set is stored in the openintro package.</li>
<li>In addition to head, structure function, we can also use glimpse() function to see the general picture of the data.</li>
<li>We can see that we have 10000 rows, so there are 10000 observations, or loans made in the data set.</li>
<li>And there are 55 columns.</li>
<li>And the name of the data set is loans_full_schema.</li>
</ul>
</div>
</section><section id="selected-variables" class="level2"><h2 class="anchored" data-anchor-id="selected-variables">Selected Variables</h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loans</span> <span class="op">&lt;-</span> <span class="va">loans_full_schema</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">loan_amount</span>, </span>
<span>                  <span class="va">interest_rate</span>, </span>
<span>                  <span class="va">grade</span>, </span>
<span>                  <span class="va">homeownership</span>, </span>
<span>                  <span class="va">debt_to_income</span><span class="op">)</span></span>
<span><span class="fu">glimpse</span><span class="op">(</span><span class="va">loans</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 10,000
Columns: 5
$ loan_amount    &lt;int&gt; 28000, 5000, 2000, 21600, 23000, 5000, 24000, 20000, 20‚Ä¶
$ interest_rate  &lt;dbl&gt; 14.07, 12.61, 17.09, 6.72, 14.07, 6.72, 13.59, 11.99, 1‚Ä¶
$ grade          &lt;ord&gt; C, C, D, A, C, A, C, B, C, A, C, B, C, B, D, D, D, F, E‚Ä¶
$ homeownership  &lt;fct&gt; MORTGAGE, RENT, RENT, RENT, RENT, OWN, MORTGAGE, MORTGA‚Ä¶
$ debt_to_income &lt;dbl&gt; 18.01, 5.04, 21.15, 10.16, 57.96, 6.46, 23.66, 16.19, 3‚Ä¶</code></pre>
</div>
</div>
<div class="notes">
<ul>
<li>There are 55 variables in the data, but our visualization purpose, we are only going to focus on 8 of these columns.</li>
<li>loan_amount, ‚Ä¶, debt_to_income ratio</li>
<li>I piped the data into the select function, which allows me to select variables I want by name, and called the selected data loans.</li>
<li>So the data has all 10000 observations and 8 selected variables.</li>
</ul>
</div>
</section><section id="variable-description" class="level2"><h2 class="anchored" data-anchor-id="variable-description">Variable Description</h2>
<p><br></p>
<table class="caption-top table">
<colgroup>
<col style="width: 54%">
<col style="width: 45%">
</colgroup>
<thead><tr class="header">
<th>variable</th>
<th>description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>loan_amount</code></td>
<td>Amount of the loan received, in US dollars</td>
</tr>
<tr class="even">
<td><code>interest_rate</code></td>
<td>Interest rate on the loan, in an annual percentage</td>
</tr>
<tr class="odd">
<td><code>grade</code></td>
<td>Loan grade, which takes a values A through G and represents the quality of the loan</td>
</tr>
<tr class="even">
<td><code>homeownership</code></td>
<td>Indicates whether the person owns, owns but has a mortgage, or rents</td>
</tr>
<tr class="odd">
<td><code>debt_to_income</code></td>
<td>Debt-to-income ratio</td>
</tr>
</tbody>
</table></section><section id="variable-types" class="level2"><h2 class="anchored" data-anchor-id="variable-types">Variable Types</h2>
<p><br></p>
<table class="caption-top table">
<thead><tr class="header">
<th>variable</th>
<th>type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>loan_amount</code></td>
<td>numerical, continuous</td>
</tr>
<tr class="even">
<td><code>interest_rate</code></td>
<td>numerical, continuous</td>
</tr>
<tr class="odd">
<td><code>grade</code></td>
<td>categorical, ordinal</td>
</tr>
<tr class="even">
<td><code>homeownership</code></td>
<td>categorical, nominal</td>
</tr>
<tr class="odd">
<td><code>debt_to_income</code></td>
<td>numerical, continuous</td>
</tr>
</tbody>
</table></section></section><section id="visualizing-categorical-data" class="level1" data-background-color="#A7D5E8"><h1 data-background-color="#A7D5E8">Visualizing Categorical Data</h1>
<section id="bar-chart" class="level2"><h2 class="anchored" data-anchor-id="bar-chart"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">Bar Chart</a></h2>
<ul>
<li>A bar chart shows the <strong>frequency table</strong> of a <strong>categorical</strong> variable.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">## geom_bar(stat = "count")</span></span>
<span><span class="va">loans</span> <span class="op">|&gt;</span> <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">homeownership</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span>  <span class="co">#&lt;&lt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/geom_bar-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:62.0%"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>One way representing categorical data is using bar plot.</li>
<li>Here we don‚Äôt use geom_point anymore. Instead, we use the geom_bar function.</li>
<li>Here we would like to see the frequency distribution of variable homeownership, so I map x to the homeownership variable.</li>
<li>When the geom_bar() is called. ggplot2 actually counts the number of each category for us. In other words, ggplots automatically creates the frequency table of homeownership for us, telling us how many observations belong to mortgage, how many belong to own and how many belong to rent.</li>
<li>So the question is, Where does count come from? How does ggplot2 do the calculation?</li>
<li>Note that on the y-axis, it displays <strong>count</strong>, but count is NOT a variable in <code>loans</code>!</li>
<li>Where does count come from?</li>
</ul>
</div>
</section><section id="statistical-transformations" class="level2" data-visibility="hidden"><h2 data-visibility="hidden" class="anchored" data-anchor-id="statistical-transformations">Statistical Transformations</h2>
<ul>
<li><p>Bar charts calculate new values to plot.</p></li>
<li><p>The algorithm used to calculate new values is called a <strong>stat</strong>, short for <em>statistical transformation</em>.</p></li>
<li><p>In short, ggplot2 calculate the frequency table of homeownership <code>table(homeownership)</code>, and save ‚Äúcount‚Äù as default value for <strong>stat</strong>.</p></li>
<li><p>It means that <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> uses <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">stat_count()</a></code>.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">loans</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">homeownership</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">stat_count</span><span class="op">(</span><span class="op">)</span>  <span class="co">#&lt;&lt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section><section id="stacked-bar-chart" class="level2" data-visibility="hidden"><h2 data-visibility="hidden" class="anchored" data-anchor-id="stacked-bar-chart">Stacked Bar Chart</h2>
<div class="columns">
<div class="column" style="width:52%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="op">(</span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">loans</span><span class="op">$</span><span class="va">homeownership</span><span class="op">)</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
              ANY MORTGAGE      OWN     RENT 
       0        0     4789     1353     3858 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="op">(</span><span class="va">freq_tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Var1 Freq
1 MORTGAGE 4789
2      OWN 1353
3     RENT 3858</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">## column names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">freq_tbl</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"type"</span>,<span class="st">"count"</span><span class="op">)</span></span>
<span><span class="va">freq_tbl</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>      type count
1 MORTGAGE  4789
2      OWN  1353
3     RENT  3858</code></pre>
</div>
</div>
<!-- # ```{r} -->
<!-- # class(freq_tbl) -->
<!-- # ``` -->
</div><div class="column" style="width:48%;">
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">bar</span> <span class="op">&lt;-</span> <span class="va">freq_tbl</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, </span>
<span>               y <span class="op">=</span> <span class="va">count</span>, </span>
<span>               fill <span class="op">=</span> <span class="va">type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span></span>
<span><span class="va">bar</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/geom_bar_identity-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>Check the proportion or percentage of each category, we may want to create a stacked bar chart.</li>
<li>To create such plot, we need to prepare a frequency table.</li>
<li>x = ‚Äú‚Äù because we don‚Äôt map any variable in the frequency table data.</li>
<li>fill = type because we are gonna fill the bar with colors by the type of homeownership.</li>
<li>stat = ‚Äúidentity‚Äù because here we don‚Äôt need to calculate the counts of each category, ‚Äúidentity‚Äù means using the values provided in the data.</li>
<li>geom_bar() uses stat_count() by default: it counts the number of cases at each x position. geom_col() uses stat_identity(): it leaves the data as is.</li>
</ul>
<p>bar + theme_minimal() + labs(x = ‚Äú‚Äú) ggplot(freq_tbl, aes(x =‚Äù‚Äú, y = count, color = type)) + geom_bar(stat =‚Äùidentity‚Äù)</p>
</div>
</section><section id="stacked-bar-chart-and-pie-chart" class="level2"><h2 class="anchored" data-anchor-id="stacked-bar-chart-and-pie-chart">Stacked Bar Chart and <a href="https://ggplot2.tidyverse.org/reference/coord_polar.html">Pie Chart</a>
</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">stacked_bar</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu">ggplot</span><span class="op">(</span><span class="va">loans</span>, </span>
<span>           <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, </span>
<span>               fill <span class="op">=</span> <span class="va">homeownership</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">stacked_bar</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/stacked_bar-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<!-- # ```{r} -->
<!-- # class(freq_tbl) -->
<!-- # ``` -->
</div><div class="column" style="width:50%;">
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">pie</span> <span class="op">&lt;-</span> <span class="va">stacked_bar</span> <span class="op">+</span> </span>
<span>    <span class="fu">coord_polar</span><span class="op">(</span>theta <span class="op">=</span> <span class="st">"y"</span><span class="op">)</span></span>
<span><span class="va">pie</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/stacked_bar_polar-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="question">
<p>How do we remove the axes and background?</p>
</div>
</div>
</div>
</div>
</section><section id="pie-chart" class="level2" data-visibility="hidden"><h2 data-visibility="hidden" class="anchored" data-anchor-id="pie-chart"><a href="https://ggplot2.tidyverse.org/reference/coord_polar.html">Pie Chart</a></h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">pie</span> <span class="op">&lt;-</span> <span class="va">bar</span> <span class="op">+</span> </span>
<span>    <span class="fu">coord_polar</span><span class="op">(</span>theta <span class="op">=</span> <span class="st">"y"</span><span class="op">)</span></span>
<span><span class="va">pie</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/pie-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">pie</span> <span class="op">+</span> <span class="fu">theme_void</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/pie_void-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<p>theta = variable to map angle to (x or y) Offset of starting point from 12 o‚Äôclock in radians. pie + geom_text(aes(label = count), position = position_stack(vjust = 0.5))</p>
</div>
</section><section id="segmented-bar-plot-stacked" class="level2"><h2 class="anchored" data-anchor-id="segmented-bar-plot-stacked">Segmented Bar Plot: Stacked</h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loans</span> <span class="op">|&gt;</span> <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">homeownership</span>, </span>
<span>                    fill <span class="op">=</span> <span class="va">grade</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="co">#&lt;&lt;</span></span>
<span>    <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/bar_stacked-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>We can use Segmented Bar Plot, which is helpful when you want to represent two variables.</li>
<li>So here we fill these bars based on the grade of the loan, which we know ranges from A to G.</li>
<li>So each one of theses segments tells us how many of that grade of loan was observed within a particular homeownership.</li>
</ul>
</div>
</section><section id="segmented-bar-plot-compare-proportions" class="level2"><h2 class="anchored" data-anchor-id="segmented-bar-plot-compare-proportions">Segmented Bar Plot: Compare Proportions</h2>
<ul>
<li>
<code>position = "fill"</code> makes each set of stacked bars the <em>same height</em>.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loans</span> <span class="op">|&gt;</span> <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">homeownership</span>, fill <span class="op">=</span> <span class="va">grade</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_bar</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span> <span class="co">#&lt;&lt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/bar_pos_fill-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:68.0%"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>We may want to add another argument in the geom_bar layer, which is position = ‚Äúfill‚Äù.</li>
<li>
<code>position = "fill"</code> works like stacking, but makes each set of stacked bars the same height.</li>
<li>And now the y-axis is not count anymore. Now the y limit is from 0 to 1, and each grade segment represents the relative frequency of a particular homeownership.</li>
<li>Which bar plot is a more useful representation for visualizing the relationship between homeownership and grade?</li>
</ul>
</div>
</section><section id="section-1" class="level2" data-visibility="hidden"><h2 data-visibility="hidden" class="anchored" data-anchor-id="section-1"></h2>
<div class="question">
<p>Which bar plot is a more useful representation for visualizing the relationship between homeownership and grade?</p>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-4-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-5-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>Well that will be the one makes each set of stacked bars the same height.</li>
<li>This way, we can more easily compare the relative frequency or proportions of grade of loan for each type of homeownership.</li>
<li>So for example, we can see that the A grade loan, which is the highest quality grade, are more common among people who either mortgage their house or own their house, but slightly less common among renters, which maybe makes sense, because if you already own your house, or you are paying mortgage, it means that somebody has already done a credit check on you, and you probably passed that, so maybe you are more reliable for paying back your loan, so you are more eligible for the higher grade of loan.</li>
</ul>
</div>
</section><section id="segmented-bar-plot-compare-individual-values" class="level2"><h2 class="anchored" data-anchor-id="segmented-bar-plot-compare-individual-values">Segmented Bar Plot: Compare Individual Values</h2>
<ul>
<li>
<code>position = "dodge"</code> places overlapping objects directly <em>beside</em> one another.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loans</span> <span class="op">|&gt;</span> <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">homeownership</span>, fill <span class="op">=</span> <span class="va">grade</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="co">#&lt;&lt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/bar_pos_dodge-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>If you wanna compare Individual Values, here the individual category of the grade of loan in each ownership type, <code>position = "dodge"</code> may be a goo option.</li>
<li>The option places the grade of loans directly <em>beside</em> one another.</li>
<li>This way, it‚Äôs easier to see the counts of grade of loan within each ownership.</li>
</ul>
</div>
</section><section id="customizing-bar-plots" class="level2" data-visibility="hidden"><h2 data-visibility="hidden" class="anchored" data-anchor-id="customizing-bar-plots">Customizing Bar Plots</h2>
<div class="columns">
<div class="column" style="width:35%;">
<div class="midi">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r my_class800 number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>loans <span class="sc">|&gt;</span> </span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb22-3"><a href="#cb22-3"></a>    <span class="fu">aes</span>(<span class="at">x =</span> homeownership,</span>
<span id="cb22-4"><a href="#cb22-4"></a>        <span class="at">fill =</span> homeownership)</span>
<span id="cb22-5"><a href="#cb22-5"></a>  ) <span class="sc">+</span> </span>
<span id="cb22-6"><a href="#cb22-6"></a>  <span class="fu">geom_bar</span>(</span>
<span id="cb22-7"><a href="#cb22-7"></a>    <span class="at">color =</span> <span class="st">"blue"</span>, </span>
<span id="cb22-8"><a href="#cb22-8"></a>    <span class="at">width =</span> <span class="fl">0.2</span>, </span>
<span id="cb22-9"><a href="#cb22-9"></a>    <span class="at">alpha =</span> <span class="fl">0.5</span></span>
<span id="cb22-10"><a href="#cb22-10"></a>  ) <span class="sc">+</span> </span>
<span id="cb22-11"><a href="#cb22-11"></a>  <span class="fu">labs</span>(</span>
<span id="cb22-12"><a href="#cb22-12"></a>    <span class="at">x =</span> <span class="st">"Homeownership"</span>, </span>
<span id="cb22-13"><a href="#cb22-13"></a>    <span class="at">title =</span> <span class="st">"Homeownership Counts"</span></span>
<span id="cb22-14"><a href="#cb22-14"></a>  ) <span class="sc">+</span></span>
<span id="cb22-15"><a href="#cb22-15"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb22-16"><a href="#cb22-16"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(count)), </span>
<span id="cb22-17"><a href="#cb22-17"></a>        <span class="at">stat =</span> <span class="st">'count'</span>, </span>
<span id="cb22-18"><a href="#cb22-18"></a>        <span class="at">hjust =</span> <span class="dv">3</span>, </span>
<span id="cb22-19"><a href="#cb22-19"></a>        <span class="at">color =</span> <span class="st">"red"</span>, </span>
<span id="cb22-20"><a href="#cb22-20"></a>        <span class="at">size =</span> <span class="dv">5</span></span>
<span id="cb22-21"><a href="#cb22-21"></a>  ) <span class="sc">+</span> </span>
<span id="cb22-22"><a href="#cb22-22"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb22-23"><a href="#cb22-23"></a>  <span class="fu">coord_flip</span>() <span class="do">## y = homeownership</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div><div class="column" style="width:65%;">
<ul>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">ggplot2::geom_bar()</a></code></p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">ggplot2::geom_text()</a></code></p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-6-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>
<a href="https://ggplot2.tidyverse.org/reference/#section-stats"><strong>stat</strong></a> is short for <em>statistical transformation</em>.</li>
<li>
<code>stat = 'count'</code> uses the <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">stat_count()</a></code> method to get the count of each homeownership.</li>
<li>One reason why ggplot2 is powerful is you can customize your plot with great flexibility.</li>
<li>When you use aesthetic option fill, each bar will be colored according to the variable we assign.</li>
<li>Because here x and fill map to the same variable, we have each bar has its own one color.</li>
<li>We can specify some settings in geom_bar. color is the color of the edge of the bar, and we can also control the width and transparency of bars.</li>
<li>We know labs already.</li>
<li>If you wanna add text other then labels to your plot, you can use geom_text() function.</li>
<li>If you wanna add the counts on each bar, you map label to the variable ..count..</li>
<li>When you see the the variable or data has ..variable_name.., it means that it is an interval variable created by ggplot2.</li>
<li>In order to use this ..count.. internal variable, we have to set the stat transformation = ‚Äúcount.</li>
<li>And we can adjust the text horizontally through [hjust], and we can also specify its color and size as we usually do.</li>
<li>Finally I use theme_minimal() and I flip the coordinate so that the bars become horizontal. It is the same as y = homeownership</li>
</ul>
</div>
</section></section><section id="visualizing-numerical-data" class="level1" data-background-color="#A7D5E8"><h1 data-background-color="#A7D5E8">Visualizing Numerical Data</h1>
<section id="histogram" class="level2"><h2 class="anchored" data-anchor-id="histogram">Histogram</h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loans</span> <span class="op">|&gt;</span> <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan_amount</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_histogram</span><span class="op">(</span><span class="op">)</span> <span class="co">#&lt;&lt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/hist-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>One of the most commonly used ways of visualizing numerical data is with histograms.</li>
<li>In ggplot2, we use geom_histogram to create a histogram.</li>
<li>When you use this function, ggplot2 send you a message saying that it uses 30 bins, or the number of classes created from the data, each representing one coloumn in the histogram.</li>
<li>And you can pick better value with <code>binwidth</code>, or the class width.</li>
</ul>
</div>
</section><section id="section-2" class="level2"><h2 class="anchored" data-anchor-id="section-2"></h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">binwidth = 1000</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">binwidth = 5000</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">binwidth = 20000</a></li>
</ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">loans</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan_amount</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_histogram</span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/hist-1000-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">loans</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan_amount</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_histogram</span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">5000</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/hist-5000-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">loans</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan_amount</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_histogram</span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">20000</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/hist-20000-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>In this plot I use a binwidth of a thousand dollars, so each one of the bars represents a range of thousand dollars, and the heights of these bars tell me how many loans fall into that range.</li>
<li>In the second plot, the binwidth is 500 thousand dollars. So here we can have better sense of the shape of the distribution, comparing to the previous one.</li>
<li>The last plot use the binwidth 20000 dollars. And now we lose anything interesting about the shape of the distribution.</li>
<li>So picking a binwidth or the number of bins is an art and science. But try 10 to 20 bins may be a good start.</li>
</ul>
</div>
</section><section id="customizing-histograms" class="level2" data-visibility="hidden"><h2 data-visibility="hidden" class="anchored" data-anchor-id="customizing-histograms">Customizing Histograms</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loans</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span></span>
<span>    <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan_amount</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span></span>
<span>    binwidth <span class="op">=</span> <span class="fl">5000</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"#003366"</span>,  </span>
<span>    colour <span class="op">=</span> <span class="st">"#FFCC00"</span>,  </span>
<span>    alpha <span class="op">=</span> <span class="fl">0.8</span>,  </span>
<span>    linetype <span class="op">=</span> <span class="st">"dashed"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Loan amount ($)"</span>, </span>
<span>    y <span class="op">=</span> <span class="st">"Frequency"</span>, </span>
<span>    title <span class="op">=</span> <span class="st">"Lending Club loans"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">theme_light</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:60%;">
<ul>
<li><code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">ggplot2::geom_histogram()</a></code></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-7-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>We can also customize histograms.</li>
<li>What I did here is that I change the color of these bars with fill argument</li>
<li>And the color argument is for the edge of the bars.</li>
<li>linetype tells ggplot that the linetype of the edge of the bars is dashed line.</li>
<li>And again, we can add labels using labs function.</li>
</ul>
</div>
</section><section id="fill-with-a-categorical-variable-stack" class="level2"><h2 class="anchored" data-anchor-id="fill-with-a-categorical-variable-stack">Fill with a Categorical Variable: Stack</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loans</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span></span>
<span>    <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan_amount</span>,</span>
<span>        fill <span class="op">=</span> <span class="va">homeownership</span><span class="op">)</span> <span class="co">#&lt;&lt;</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span></span>
<span>    binwidth <span class="op">=</span> <span class="fl">5000</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Loan amount ($)"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Frequency"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_linedraw</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-8-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>We can also fill a histogram with a categorical variable, so it allows us to explore the relationship between the numerical and categorical variables.</li>
<li>This is done by adding aesthetic fill. Here basically filling the bars based on home ownership.</li>
<li>So we can actually see what‚Äôs happening behind each level</li>
</ul>
</div>
</section><section id="fill-with-a-categorical-variable-identity-bad" class="level2"><h2 class="anchored" data-anchor-id="fill-with-a-categorical-variable-identity-bad">Fill with a Categorical Variable: Identity (BAD)</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loans</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span></span>
<span>    <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan_amount</span>,</span>
<span>        fill <span class="op">=</span> <span class="va">homeownership</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span></span>
<span>    binwidth <span class="op">=</span> <span class="fl">5000</span>,</span>
<span>    position <span class="op">=</span> <span class="st">"identity"</span> <span class="co">#&lt;&lt;</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Loan amount ($)"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Frequency"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Lending Club loans"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-9-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<p>. . .</p>
<div class="question">
<p>Why such plot is bad?</p>
</div>
<div class="notes">
<ul>
<li>So here, if we don‚Äôt specify alpha, there is no transparency at all.</li>
<li>And we can see that the histogram of loan amount for house owners is totally masked by the histogram for renters, because there are much more renters than house owners, and the frequency of each bin in the histogram for the renters is higher than the frequency for the owners.</li>
<li>So use visualization carefully. Sometimes the plot does not provide more information, and sometimes it is misleading.</li>
</ul>
</div>
</section><section id="fill-with-a-categorical-variable-identity" class="level2"><h2 class="anchored" data-anchor-id="fill-with-a-categorical-variable-identity">Fill with a Categorical Variable: Identity</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loans</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span></span>
<span>    <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan_amount</span>,</span>
<span>        fill <span class="op">=</span> <span class="va">homeownership</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span></span>
<span>    binwidth <span class="op">=</span> <span class="fl">5000</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">0.5</span>,  <span class="co">#&lt;&lt;</span></span>
<span>    position <span class="op">=</span> <span class="st">"identity"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Loan amount ($)"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Frequency"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Lending Club loans"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-10-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>We can also compare the histograms of loan amount of different homeownership by simply superimposing on one to another.</li>
<li>We use position = ‚Äúidentity‚Äù to do that.</li>
<li>In this case, we basically put three histograms together in one plot, sharing the same x-axis and y-axis</li>
<li>If you wanna use this type of plot, remember to make it transparent, so that each histogram can be seen even they are superimposed.</li>
</ul>
</div>
</section><section id="facet-with-a-categorical-variable" class="level2"><h2 class="anchored" data-anchor-id="facet-with-a-categorical-variable">Facet with a Categorical Variable</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loans</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span></span>
<span>    <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan_amount</span>,</span>
<span>        fill <span class="op">=</span> <span class="va">homeownership</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span></span>
<span>    binwidth <span class="op">=</span> <span class="fl">5000</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Loan amount ($)"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Frequency"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Lending Club loans"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span></span>
<span>    <span class="op">~</span> <span class="va">homeownership</span>, <span class="co">#&lt;&lt;</span></span>
<span>    nrow <span class="op">=</span> <span class="fl">3</span>  <span class="co">#&lt;&lt;</span></span>
<span>  <span class="op">)</span>       </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-11-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>If you don‚Äôt want to put all three histograms in one single plot, remember you can use faceting trick.</li>
<li>first again I fill in with colors based on homeownership</li>
<li>Then instead of changing alpha level, and put them on top of each other, I can facet the plot.</li>
<li>Since I am using a single categorical variable to facet, I am going to use facet_wrap() function by homeownership variable and I want the data to be represented in 3 rows, so that the three histograms share the same x-axis and are compared easily. - Basically, there are not many house owners in the data set. And basically all three distributions are right-skewed.</li>
</ul>
</div>
</section><section id="section-3" class="level2"><h2 class="anchored" data-anchor-id="section-3"></h2>
<div class="lab">
<p><span style="color:blue"><strong>13-Visualization</strong></span></p>
<!-- - Create a R script named **lab11-bar-hist.R**. -->
<p>In <strong>lab.qmd</strong> <code>## Lab 13</code> section,</p>
<ul>
<li><p>Import the data <strong>penguins.csv</strong>.</p></li>
<li><p>Generate the following</p></li>
</ul>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-12-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-13-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section><section id="section-4" class="level2"><h2 class="anchored" data-anchor-id="section-4"></h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library(tidyverse)</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(__________________)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>________ <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(_______________________) <span class="sc">+</span>  <span class="do">## mapping layer  </span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    ___________________ <span class="sc">+</span>  <span class="do">## geometry layer</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    _____________________________  <span class="do">## label layer</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><br><br><br></p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>________ <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(______________________________) <span class="sc">+</span>  <span class="do">## mapping layer  </span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    _______________ <span class="sc">+</span>  <span class="do">## geometry layer</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    _______________ <span class="sc">+</span>  <span class="do">## label layer</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    ______________________________  <span class="sc">+</span>   <span class="do">## facet layer</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    ______________________________      <span class="do">## theme layer (set legend.position = "none")</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section><section id="density-plot" class="level2"><h2 class="anchored" data-anchor-id="density-plot">Density Plot</h2>
<!-- kernel = c("gaussian", "epanechnikov", "rectangular", -->
<!--                    "triangular", "biweight", -->
<!--                    "cosine", "optcosine") -->
<ul>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density()</a></code> uses <strong>kernel density estimation</strong> to smooth the histogram or our data. (MATH 4750 Statistical Computing)</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">loans</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan_amount</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_density</span><span class="op">(</span><span class="op">)</span>  <span class="co">#&lt;&lt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/den-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:55.0%"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>Let‚Äôs continue. Another way we can visualize numerical data is using a density plot.</li>
<li>A density plot is basically a smoothed version of a histogram.</li>
<li>Remember that a continuous random variable has a continuous probability distribution that is a density curve as a plot. Right?</li>
<li>So a normal r.v. has a normal density curve that this.</li>
<li>But given a data set of continuous variable, we can only draw a histogram that is sort of an approximation to its density curve. The histogram will only be very much like its true density plot when the data size is huge or approaching to infinity.</li>
<li>A density plot here smooths the histogram, telling us that given the data set we have, what the true density curve might look like.</li>
<li>In ggplot, we have geometry geom_density() to create a density plot.</li>
<li>And ggplot uses the so-called <strong>kernel density estimation</strong> to smooth the histogram. The kernel is not a the linux kernel in computer science. The kernel here is a probability distribution.</li>
<li>If you are interested, it will be taught in 4750 Computational Statistics which is a new course starting this fall.</li>
<li>You can see in the graph that the density curve smooths the histogram, but it;s still not very smooth, right. It‚Äôs a little bit jagged.</li>
<li>The ggplot choose a level of smoothness for us. And we can adjust the smoothness by ourselves.</li>
</ul>
</div>
</section><section id="density-plots-and-adjusting-bandwidth" class="level2"><h2 class="anchored" data-anchor-id="density-plots-and-adjusting-bandwidth">Density Plots and Adjusting Bandwidth</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">adjust = 0.5</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">adjust = 1</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">adjust = 2</a></li>
</ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">loans</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan_amount</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_density</span><span class="op">(</span>adjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/den05-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:65.0%"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">loans</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan_amount</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_density</span><span class="op">(</span>adjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="co"># default bandwidth</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/den1-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:65.0%"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">loans</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan_amount</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_density</span><span class="op">(</span>adjust <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/den2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:65.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>We can adjust the smoothness of a density plot by the argument adjust in geom_density() function.</li>
<li>basically, the larger the value is, the smoother the curve will be.</li>
<li>and the default is adjust = 1.</li>
<li>Keep in mind that if you use a very smooth density plot, some local peaks or features may be washed out or smoothed away. If these local things contain some information, you may lose the information by just looking at the smooth density plot.</li>
<li>So a better idea is to try different level of smoothness, and check different plots, such as histogram, bar plots, and scatter plots as well.</li>
</ul>
</div>
</section><section id="customizing-density-plots" class="level2" data-visibility="hidden"><h2 data-visibility="hidden" class="anchored" data-anchor-id="customizing-density-plots">Customizing Density Plots</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loans</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span></span>
<span>    <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan_amount</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_density</span><span class="op">(</span></span>
<span>    adjust <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"#FFCC00"</span>, </span>
<span>    color <span class="op">=</span> <span class="st">"#003366"</span>, </span>
<span>    alpha <span class="op">=</span> <span class="fl">0.5</span>, </span>
<span>    linetype <span class="op">=</span> <span class="st">"dashed"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Loan amount ($)"</span>, </span>
<span>    y <span class="op">=</span> <span class="st">"Density"</span>, </span>
<span>    title <span class="op">=</span> <span class="st">"Lending Club loans"</span></span>
<span>  <span class="op">)</span> </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:60%;">
<ul>
<li><code><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">ggplot2::geom_density()</a></code></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-16-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>We can also customize density plots as others.</li>
<li>In addition to adjust, we can also use fill, color, alpha, line type as we have used in histogram.</li>
</ul>
</div>
</section><section id="density-curve-on-a-histogram" class="level2" data-visibility="hidden"><h2 data-visibility="hidden" class="anchored" data-anchor-id="density-curve-on-a-histogram">Density Curve on a Histogram</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loans</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span></span>
<span>    <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan_amount</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co">## scale down to </span></span>
<span>  <span class="co">## match the density</span></span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span></span>
<span>    binwidth <span class="op">=</span> <span class="fl">5000</span>, </span>
<span>    <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="fu">after_stat</span><span class="op">(</span><span class="va">density</span><span class="op">)</span><span class="op">)</span> <span class="co">#&lt;&lt;</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_density</span><span class="op">(</span></span>
<span>    alpha <span class="op">=</span> <span class="fl">0.1</span>, </span>
<span>    fill <span class="op">=</span> <span class="st">"#FF6666"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Loan amount ($)"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Density"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Lending Club loans"</span></span>
<span>  <span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-17-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>Sometimes we like to put the density on top of the histogram to have a better understanding how smooth the density curve is, comparing to the histogram.</li>
<li>Well it‚Äôs very easy to do that.</li>
<li>We just need to add the geom_density layer to the existent geom_histogram layer.</li>
<li>And don‚Äôt forget to use density scale in geom_histogram so that the height of histogram and density plot can share the same y-axis each other.</li>
</ul>
</div>
</section><section id="adding-a-categorical-variable-to-density-plots" class="level2"><h2 class="anchored" data-anchor-id="adding-a-categorical-variable-to-density-plots">Adding a Categorical Variable to Density Plots</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loans</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span></span>
<span>    <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan_amount</span>,</span>
<span>        fill <span class="op">=</span> <span class="va">homeownership</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_density</span><span class="op">(</span></span>
<span>    adjust <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">0.4</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Loan amount ($)"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Density"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Amounts of loans"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Homeownership"</span></span>
<span>  <span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-18-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>We can also add a categorical variable to a density plot. This is similar to what we did with the histograms, where you can see them overlaid on top of each other.</li>
<li>So once again, we can fill in the density curves based on the value of homeownership.</li>
<li>and I am changing alpha, so that we can actually see what‚Äôs happening behind the curve. If I didn‚Äôt change alpha, we are not able to see the peaks of mortagage and own because they are masked by the density curve of home renters. OK.</li>
</ul>
</div>
</section><section id="box-plot" class="level2" data-visibility="hidden"><h2 data-visibility="hidden" class="anchored" data-anchor-id="box-plot">Box Plot</h2>
<div class="notes">
<ul>
<li>OK. Again boxplot, which is another way to visualize numerical data.</li>
<li>Jut show you the meaning of each part of the boxplot that you already learned in MATH 4720.</li>
</ul>
</div>
</section><section id="box-plot-1" class="level2"><h2 class="anchored" data-anchor-id="box-plot-1">Box Plot</h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb42"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loans</span> <span class="op">|&gt;</span> <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">interest_rate</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"interest rate (%)"</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/box-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:73.0%"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>Remember in base R, we can use boxplot function to create a boxplot.</li>
<li>In ggplot, we add the geometry layer, geom_boxplot().</li>
<li>One of things that boxplots are good at is uncovering our potential outliers, and here, the distribution of interest rates is right-skewed, and has several outliers.</li>
<li>Most of the interest rates are between 10 to 15%, but some can be as high as 30% or more.</li>
</ul>
</div>
</section><section id="customizing-box-plots" class="level2" data-visibility="hidden"><h2 data-visibility="hidden" class="anchored" data-anchor-id="customizing-box-plots">Customizing Box Plots</h2>
<div class="columns">
<div class="column" style="width:45%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loans</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">interest_rate</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span></span>
<span>    <span class="co"># custom outliers</span></span>
<span>    outlier.colour <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>    outlier.shape <span class="op">=</span> <span class="fl">8</span>,</span>
<span>    outlier.size <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    <span class="co"># Notch?</span></span>
<span>    notch <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    notchwidth <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>    <span class="co"># custom boxes</span></span>
<span>    fill <span class="op">=</span> <span class="st">"#FFCC00"</span>,</span>
<span>    colour <span class="op">=</span> <span class="st">"#003366"</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">0.2</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Interest rate (%)"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Interest rates of loans"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span></span>
<span>    axis.ticks.y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    axis.text.y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:55%;">
<ul>
<li><code><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">ggplot2::geom_boxplot()</a></code></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-20-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>How do we customize our boxplot?</li>
<li>For a boxplot, we can change outlier‚Äôs color, shape and size, using outlier.colour, outlier.shape and outlier.size.</li>
<li>I remembered I show you point shape and its corresponding number when I introduced base R plotting. You can use the same point shape numbering system here.</li>
<li>You can also decide if the boxplot has a notch, although I don‚Äôt see the importance of this option.</li>
<li>And again you can customize the box using fill, color, and alpha argument.</li>
<li>And one interesting part is that, when we show a boxplot like this, the y-axis does not mean anything right? the width or height of the box does not meaning anything.</li>
<li>So we can actually remove the y axis tick marks and labels.</li>
<li>And how? Because the axes labels and ticks are part of plotting theme, we should go to theme and set ticks.y and text.y = element_blank().</li>
<li>This is very ggplot2 syntax. It is a little bit harder to read and make sense of, so it does take time to get used to it.</li>
</ul>
</div>
</section><section id="adding-a-categorical-variable-to-box-plots" class="level2"><h2 class="anchored" data-anchor-id="adding-a-categorical-variable-to-box-plots">Adding a Categorical Variable to Box Plots</h2>
<div class="columns">
<div class="column" style="width:45%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb44"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loans</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span></span>
<span>    <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">interest_rate</span>,</span>
<span>        y <span class="op">=</span> <span class="va">grade</span><span class="op">)</span> <span class="co">#&lt;&lt;</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Interest rate (%)"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Grade"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Interest Rates of Loans"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"by grade of loan"</span></span>
<span>  <span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-21-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>We can also add categorical variable to a boxplot, so these are called side-by-side boxplots. They are very commonly used.</li>
<li>This is the interest rate distribution by the grade of loan, where A is of the highest quality and G is the lowest quality.</li>
<li>And it looks like the higher the quality of the loan, the lower the interest rate it has.</li>
<li>We can also see that there is an outlier in grade D data, where the interest rate is super low, even lower than most of the interest rate of the grade A loans. You as a reasearcher or data analyst have to figure out if it is typo, or it is the true interest rate. If it is a correct number, why such low interest rate happened?</li>
<li>And to create such side-by-side boxplot, we just add y mapping, setting it to grade.</li>
</ul>
</div>
</section><section id="adding-two-categorical-variables-to-box-plots" class="level2"><h2 class="anchored" data-anchor-id="adding-two-categorical-variables-to-box-plots">Adding Two Categorical Variables to Box Plots</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loans</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span></span>
<span>    <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">interest_rate</span>,</span>
<span>        y <span class="op">=</span> <span class="va">grade</span>,</span>
<span>        fill <span class="op">=</span> <span class="va">homeownership</span><span class="op">)</span> <span class="co">#&lt;&lt;</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Interest rate (%)"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Grade"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Homeowership"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Interest Rates of Loans"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"by grade and ownership"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span></span>
<span>    legend.position <span class="op">=</span> <span class="st">"bottom"</span></span>
<span>  <span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-22-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>If we want to add two categorical variables to box plots, that‚Äôs easy.</li>
<li>We can fill the boxplots with colors based on another variable, here the homeownership.</li>
<li>ANd now each grade of loans is furthered divided into three categories of the homeownership variable.</li>
<li>And we can see that basically, the type of homeownership does not affect interest rate much given the same grade of loans.</li>
</ul>
</div>
</section><section id="adding-points-on-box-plots" class="level2" data-visibility="hidden"><h2 data-visibility="hidden" class="anchored" data-anchor-id="adding-points-on-box-plots">Adding Points on Box Plots</h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb46"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">loans</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">homeownership</span>, y <span class="op">=</span> <span class="va">interest_rate</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.1</span>, shape <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="co">#&lt;&lt; geom_jitter(width = 0.2, alpha = 0.1, shape = 1)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/box-pt-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:72.0%"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>If we don‚Äôt just want the boxplot, and we also want to show data points along with the boxplot, we can add the another layer geom_point(), as shown here.</li>
<li>But this plot is a little misleading. Anybody see why?</li>
<li>The boxplot tell us 50% of the data points should be inside the box, right?</li>
<li>But according to the boxplot, it is not the case. Why?</li>
<li>Actually, there are lots points overlapped at the same interest rate. So it looks like there is only one data point, but actually there are many data points right there. They just overlapped each other.</li>
<li>So how do we actually show all data points?</li>
</ul>
</div>
</section></section><section id="relationships-between-numerical-variables" class="level1" data-background-color="#A7D5E8"><h1 data-background-color="#A7D5E8">Relationships between numerical variables</h1>
<section id="scatterplot" class="level2"><h2 class="anchored" data-anchor-id="scatterplot">Scatterplot</h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">loans</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">debt_to_income</span>, y <span class="op">=</span> <span class="va">interest_rate</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_point</span><span class="op">(</span>shape <span class="op">=</span> <span class="fl">23</span>, fill <span class="op">=</span> <span class="st">"blue"</span>, size <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span>  <span class="co">#&lt;&lt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/scatter-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:72.0%"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>We already talked about scatter plot using geom_point().</li>
<li>Here we have a scatter plot of interest rate and the debt to income ratio.</li>
<li>One potential problem here is that like adding points to boxplot, we have so many data points overlapped together, and their relationship cannot be truly revealed. and so it‚Äôs really difficult to make sense of this scatter plot built with geom_point.</li>
</ul>
</div>
</section><section id="hex-plot" class="level2" data-visibility="hidden"><h2 data-visibility="hidden" class="anchored" data-anchor-id="hex-plot">Hex Plot</h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb48"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/edzer/hexbin">hexbin</a></span><span class="op">)</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">loans</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">debt_to_income</span>, y <span class="op">=</span> <span class="va">interest_rate</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_hex</span><span class="op">(</span><span class="op">)</span>  <span class="co">#&lt;&lt; (hexbin pkg)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/hex-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:72.0%"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>So one solution is using Hex Plot instead by using geom_hex() function.</li>
<li>The idea is that we first bin these data with the hex shape, grouping data points together for each hex bin.</li>
<li>And the color of these hexes is what tells us how many data points or how dense my data are.</li>
<li>So the lighter the color, the more data points we have there.</li>
<li>This is particularly useful when we have lots of data points that have similar or the same values.</li>
</ul>
</div>
</section><section id="hex-plot-zoom-in" class="level2"><h2 class="anchored" data-anchor-id="hex-plot-zoom-in">Hex Plot Zoom-in</h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loans</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">debt_to_income</span> <span class="op">&lt;</span> <span class="fl">100</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">debt_to_income</span>, y <span class="op">=</span> <span class="va">interest_rate</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_hex</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">viridis</span><span class="fu">::</span><span class="fu"><a href="https://sjmgarnier.github.io/viridis/reference/scale_viridis.html">scale_fill_viridis</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/hex-zoom-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:62.0%"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>Here just show you that we can further zoom in the plot, focusing on the the data that has debt_to_income ratio less that 100%.</li>
<li>And now we can more clearly see what‚Äôs going on.</li>
<li>Basically, more data points happen around debt_to_income ratio 12 to 15% and interest rate 10%.</li>
<li>And the two variables are a little bit positively correlated that higher debt_to_income ratio corresponds to higher interest rate. But again the correlation is very weak here.</li>
</ul>
</div>
</section></section><section id="other-plots" class="level1" data-background-color="#A7D5E8"><h1 data-background-color="#A7D5E8">Other Plots</h1>
<section id="line-chart-for-time-series-ggplot2geom_line" class="level2"><h2 class="anchored" data-anchor-id="line-chart-for-time-series-ggplot2geom_line">Line Chart for Time Series <code>ggplot2::geom_line()</code>
</h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb50"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">economics_long</span> <span class="op">|&gt;</span> <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">value01</span>, </span>
<span>                             colour <span class="op">=</span> <span class="va">variable</span>, linetype <span class="op">=</span> <span class="va">variable</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_line</span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/line-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>If you have time series data, line plot is your good friend, which shows the trend of some variable.</li>
<li>For example here, the unemployment number.</li>
</ul>
</div>
</section><section id="qq-plots" class="level2"><h2 class="anchored" data-anchor-id="qq-plots">QQ-plots</h2>
<ul>
<li>Quantile-Quantile plots are used to check if data are normally distributed (or follow any distribution).</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">mpg</span>, <span class="fu">aes</span><span class="op">(</span>sample <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_qq</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_qq_line</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/qq-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>To create a qqplot, we add the geometry geom_qq(), and geom_qq_line() if you want to add a straight line that helps you determine whether the data are normally distributed.</li>
</ul>
</div>
</section><section id="violin-plots" class="level2"><h2 class="anchored" data-anchor-id="violin-plots">Violin Plots</h2>
<ul>
<li>Violin plots are similar to box plots, but show the smooth density of the data.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb52"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">loans</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan_amount</span>, y <span class="op">=</span> <span class="va">grade</span><span class="op">)</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">f</span> <span class="op">+</span> <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-24-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">f</span> <span class="op">+</span> <span class="fu">geom_violin</span><span class="op">(</span><span class="op">)</span> </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/violin-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<!-- + geom_boxplot(width = 0.2) -->
<ul>
<li>In ggplot, we can use geom_violin() to create one. <!-- - Basically Violin Plots contain more information because we also have the density or distribution of the data. -->
</li>
<li>See if we just check the boxplot, we will miss the information that the loan amount of the grade G actually has a bimodal distribution, right?</li>
</ul>
</div>
</section><section id="add-on-ggridges-for-ridge-plots" class="level2"><h2 class="anchored" data-anchor-id="add-on-ggridges-for-ridge-plots">Add-on üì¶: <a href="https://wilkelab.org/ggridges/"><code>ggridges</code></a> for Ridge Plots</h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb55"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/ggridges/">ggridges</a></span><span class="op">)</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">loans</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan_amount</span>, y <span class="op">=</span> <span class="va">grade</span>, fill <span class="op">=</span> <span class="va">grade</span>, color <span class="op">=</span> <span class="va">grade</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://wilkelab.org/ggridges/reference/geom_density_ridges.html">geom_density_ridges</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/ridges-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>To show better smooth density plots, we can create the so-called ridge plots provided by the add-on package called ggridges.</li>
<li>everything is basically the same. You just need to install and load the package, and add the geometry called geom_density_ridges().</li>
</ul>
</div>
</section><section id="add-on-ggrepel" class="level2"><h2 class="anchored" data-anchor-id="add-on-ggrepel">Add-on üì¶: <a href="https://ggrepel.slowkow.com/"><code>ggrepel</code></a> <img src="https://raw.githubusercontent.com/slowkow/ggrepel/master/man/figures/logo.svg" class="img-fluid" width="50">
</h2>
<ul>
<li>
<strong>ggrepel</strong> provides geoms for ggplot2 to repel overlapping text labels.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb56"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggrepel.slowkow.com/">ggrepel</a></span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">mtcars</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">wt</span> <span class="op">&gt;</span> <span class="fl">2.75</span> <span class="op">&amp;</span> <span class="va">wt</span> <span class="op">&lt;</span> <span class="fl">3.45</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">rownames_to_column</span><span class="op">(</span><span class="st">"car"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">wt</span>, <span class="va">mpg</span>, label <span class="op">=</span> <span class="va">car</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb57"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"geom_text()"</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/ggrepel1-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb58"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggrepel.slowkow.com/reference/geom_text_repel.html">geom_text_repel</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"geom_text_repel()"</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/ggrepel2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>Another useful ggplot2 extension is ggrepel that provides geoms for ggplot2 to repel overlapping text labels.</li>
<li>This makes your labels much more clear.</li>
<li>For example, here I want to label each data point by its observation‚Äôs name, I can add geom_text(). But the ggplot2 setting basically put the text right on the top of the point, which sometimes the labels are mixed together and makes it hard to read.</li>
<li>And we can use the function geom_text_repel(), and then it will automatically find a good spot for those texts that are close to their data point, but not overlap each other.</li>
</ul>
</div>
</section><section id="wordcloud-from-ggwordcloud-package" class="level2"><h2 class="anchored" data-anchor-id="wordcloud-from-ggwordcloud-package">Wordcloud from <a href="https://lepennec.github.io/ggwordcloud/"><code>ggwordcloud</code></a> Package <img src="https://raw.githubusercontent.com/lepennec/ggwordcloud/master/man/figures/logo.png" class="img-fluid" width="50">
</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Plot</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Code</a></li>
</ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-25-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb59"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lepennec/ggwordcloud">ggwordcloud</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/yixuan/showtext">showtext</a></span><span class="op">)</span></span>
<span><span class="va">where</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sysfonts/man/font_files.html">font_files</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="fu">str_detect</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/sysfonts/man/font_files.html">font_files</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">family</span>, <span class="st">"Arial Unicode MS"</span><span class="op">)</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">thankyou_words_small</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">word</span>, size <span class="op">=</span> <span class="va">speakers</span>, color <span class="op">=</span> <span class="va">name</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://lepennec.github.io/ggwordcloud/reference/geom_text_wordcloud.html">geom_text_wordcloud</a></span><span class="op">(</span>area_corr <span class="op">=</span> <span class="cn">TRUE</span>, rm_outside <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                        family <span class="op">=</span> <span class="va">where</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span><span class="op">$</span><span class="va">family</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html">scale_size_area</a></span><span class="op">(</span>max_size <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>plot.margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span>t <span class="op">=</span> <span class="op">-</span><span class="fl">200</span>,  <span class="co"># Top margin</span></span>
<span>                               r <span class="op">=</span> <span class="fl">0</span>,  <span class="co"># Right margin</span></span>
<span>                               b <span class="op">=</span> <span class="fl">0</span>,  <span class="co"># Bottom margin</span></span>
<span>                               l <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="co"># Left margin</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
<div class="notes">
<p>https://towardsdatascience.com/create-a-word-cloud-with-r-bde3e7422e8a http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know http://www.sthda.com/english/wiki/word-cloud-generator-in-r-one-killer-function-to-do-everything-you-need https://semba-blog.netlify.app/10/29/2019/creating-wordcloud-in-r/ <!-- install.packages("tm")  # for text mining --> <!-- install.packages("SnowballC") # for text stemming --> <!-- install.packages("wordcloud") # word-cloud generator  --> <!-- install.packages("RColorBrewer") # color palettes --> https://stackoverflow.com/questions/74415534/why-do-characters-from-foreign-alphabets-not-show-in-my-wordcloud-on-r</p>
</div>
</section><section id="radar-chart-from-fmsb-and-ggradar-package" class="level2"><h2 class="anchored" data-anchor-id="radar-chart-from-fmsb-and-ggradar-package">Radar Chart from <a href="https://r-charts.com/ranking/radar-chart/"><code>fmsb</code></a> and <a href="https://github.com/ricardo-bion/ggradar"><code>ggradar</code></a> Package</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Plot</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Code</a></li>
</ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-26-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-27-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="columns">
<div class="column" style="width:50%;">
<div class="midi">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb60"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">radar_data</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span></span>
<span>    file <span class="op">=</span> <span class="st">"./data/radar_data.csv"</span><span class="op">)</span></span>
<span><span class="co"># Color vector</span></span>
<span><span class="va">colors_border</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html">rgb</a></span><span class="op">(</span><span class="fl">0.2</span>,<span class="fl">0.5</span>,<span class="fl">0.5</span>,<span class="fl">0.9</span><span class="op">)</span>, </span>
<span>                   <span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html">rgb</a></span><span class="op">(</span><span class="fl">0.8</span>,<span class="fl">0.2</span>,<span class="fl">0.5</span>,<span class="fl">0.9</span><span class="op">)</span>, </span>
<span>                   <span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html">rgb</a></span><span class="op">(</span><span class="fl">0.7</span>,<span class="fl">0.5</span>,<span class="fl">0.1</span>,<span class="fl">0.9</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">colors_in</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html">rgb</a></span><span class="op">(</span><span class="fl">0.2</span>,<span class="fl">0.5</span>,<span class="fl">0.5</span>,<span class="fl">0.4</span><span class="op">)</span>, </span>
<span>               <span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html">rgb</a></span><span class="op">(</span><span class="fl">0.8</span>,<span class="fl">0.2</span>,<span class="fl">0.5</span>,<span class="fl">0.4</span><span class="op">)</span>, </span>
<span>               <span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html">rgb</a></span><span class="op">(</span><span class="fl">0.7</span>,<span class="fl">0.5</span>,<span class="fl">0.1</span>,<span class="fl">0.4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">radarchart</span><span class="op">(</span><span class="va">radar_data</span>, axistype <span class="op">=</span> <span class="fl">1</span>, </span>
<span>           <span class="co">#custom polygon</span></span>
<span>           pcol <span class="op">=</span> <span class="va">colors_border</span>, </span>
<span>           pfcol <span class="op">=</span> <span class="va">colors_in</span>, </span>
<span>           plwd <span class="op">=</span> <span class="fl">4</span>, plty <span class="op">=</span> <span class="fl">1</span>,</span>
<span>           <span class="co">#custom the grid</span></span>
<span>           cglcol <span class="op">=</span> <span class="st">"grey"</span>, cglty <span class="op">=</span> <span class="fl">1</span>, </span>
<span>           axislabcol <span class="op">=</span> <span class="st">"grey"</span>, </span>
<span>           caxislabels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">20</span>, <span class="fl">5</span><span class="op">)</span>, </span>
<span>           cglwd <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>           <span class="co">#custom labels</span></span>
<span>           vlcex <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># legend("topright", legend = rownames(radar_data[-c(1, 2), ]), bty = "n", pch = 20 , </span></span>
<span><span class="co">#        col = colors_in, text.col = "grey", cex = 1.2, pt.cex = 3)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="midi">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb62"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">ggradar</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ggradar_data</span> <span class="op">&lt;-</span> <span class="va">radar_data</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">as_tibble</span><span class="op">(</span>rownames <span class="op">=</span> <span class="st">"group"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">mutate_at</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="op">-</span><span class="va">group</span><span class="op">)</span>, <span class="va">rescale</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ggradar/man/ggradar-package.html">ggradar</a></span><span class="op">(</span><span class="va">ggradar_data</span>,</span>
<span>        base.size <span class="op">=</span> <span class="fl">5</span>,</span>
<span>        grid.label.size <span class="op">=</span> <span class="fl">6</span>,</span>
<span>        axis.label.size <span class="op">=</span> <span class="fl">5</span>,</span>
<span>        group.point.size <span class="op">=</span> <span class="fl">3</span>,</span>
<span>        fill.alpha <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>        grid.line.width <span class="op">=</span> <span class="fl">0.4</span>,</span>
<span>        plot.legend <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>        fill <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<p>lazy-load database ‚Äò/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/callr/R/callr.rdb‚Äô is corrupt Restart R</p>
</div>
</section><section id="network-from-igraph-package" class="level2"><h2 class="anchored" data-anchor-id="network-from-igraph-package">Network from <a href="https://igraph.org/r/"><code>igraph</code></a> Package</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">Plot</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Code</a></li>
</ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/10-viz/unnamed-chunk-28-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:65.0%"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb63"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r.igraph.org/">igraph</a></span><span class="op">)</span></span>
<span><span class="va">network_data</span> <span class="op">&lt;-</span> <span class="fu">read_rds</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"./data/network_data.rds"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># build the graph object</span></span>
<span><span class="va">network</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/graph_from_adjacency_matrix.html">graph_from_adjacency_matrix</a></span><span class="op">(</span><span class="va">network_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">network</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section><section id="more-r-graphics-resources" class="level2"><h2 class="anchored" data-anchor-id="more-r-graphics-resources">More R Graphics Resources</h2>
<ul>
<li>More add-on üì¶: <a href="https://exts.ggplot2.tidyverse.org/gallery/">ggplot2 extensions</a>
</li>
<li><a href="https://www.r-graph-gallery.com/index.html">The R Graph Gallery</a></li>
<li><a href="https://r-graphics.org/">R Graphics Cookbook</a></li>
<li><a href="https://r-charts.com/">R CHARTS</a></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="./images/10-viz/ggextension.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>As I mentioned before, there are tons of ggplot2 extensions.</li>
<li>If you are interested, check those links, and learn more about them. OK.</li>
</ul>
</div>


<script type="ojs-module-contents">
eyJjb250ZW50cyI6W119
</script><div id="exercise-loading-indicator" class="exercise-loading-indicator d-none d-flex align-items-center gap-2">
<div id="exercise-loading-status" class="d-flex gap-2">

</div>
<div class="spinner-grow spinner-grow-sm">

</div>
</div>
<script type="vfs-file">
W10=
</script></section></section></main><!-- /main --><script type="ojs-module-contents">
eyJjb250ZW50cyI6W119
</script><script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../slides";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/math3570-s26\.github\.io\/website\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>¬© Copyright 2026, Cheng-Han Yu</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions"><ul><li><a href="https://github.com/math3570-s26/website/edit/main/slides/10-viz.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/math3570-s26/website/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This page is built with ‚ù§Ô∏è and <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>


</body></html>