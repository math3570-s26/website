<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.19">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Dr.&nbsp;Cheng-Han Yu   Department of Mathematical and Statistical Sciences   Marquette University">
<title>Data Importing  ‚Äì MATH/COSC 3570 - Spring 2026</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-46eeb4c476de49ef7df495821a6125d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-38b22635d8ba2828809dae622215a440.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/live-runtime/live-runtime.js" type="module"></script>
<link href="../site_libs/quarto-contrib/live-runtime/live-runtime.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script type="module" src="../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script><link href="../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<meta property="og:title" content="Data Importing r fontawesome::fa(&quot;database&quot;) ‚Äì MATH/COSC 3570 - Spring 2026">
<meta property="og:description" content="MATH/COSC 3570 Introduction to Data Science">
<meta property="og:image" content="https://math3570-s26.github.io/website/slides/images/08-import/arrow.png">
<meta property="og:site_name" content="MATH/COSC 3570 - Spring 2026">
<meta property="og:image:height" content="2312">
<meta property="og:image:width" content="2005">
</head>
<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Data Importing <svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M448 80v48c0 44.2-100.3 80-224 80S0 172.2 0 128V80C0 35.8 100.3 0 224 0S448 35.8 448 80zM393.2 214.7c20.8-7.4 39.9-16.9 54.8-28.6V288c0 44.2-100.3 80-224 80S0 332.2 0 288V186.1c14.9 11.8 34 21.2 54.8 28.6C99.7 230.7 159.5 240 224 240s124.3-9.3 169.2-25.3zM0 346.1c14.9 11.8 34 21.2 54.8 28.6C99.7 390.7 159.5 400 224 400s124.3-9.3 169.2-25.3c20.8-7.4 39.9-16.9 54.8-28.6V432c0 44.2-100.3 80-224 80S0 476.2 0 432V346.1z"></path></svg>
</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/logo.png" alt="" class="sidebar-logo light-content py-0 d-lg-inline d-none"><img src="../images/logo.png" alt="" class="sidebar-logo dark-content py-0 d-lg-inline d-none"></a>
      <div class="sidebar-tools-main">
    <a href="https://github.com/math3570-s26" title="GitHub organization" class="quarto-navigation-tool px-1" aria-label="GitHub organization"><i class="bi bi-github"></i></a>
    <a href="https://d2l.mu.edu/d2l/home/630428" title="D2L" class="quarto-navigation-tool px-1" aria-label="D2L"><i class="bi bi-person-fill"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Course information</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">AI Activities</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ai_act_guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Guideline and Policy</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ai_example.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">AI Project Example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ai.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">AI Project Topics</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Mini Project</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topics and Works</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Final Project</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../present-description-final.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Guideline and Policy</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../present-work-final.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project Group and Proposal</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    <div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="08-import-slides.html"><i class="bi bi-file-slides"></i>RevealJS (live)</a></li></ul></div></div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Data Importing <svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M448 80v48c0 44.2-100.3 80-224 80S0 172.2 0 128V80C0 35.8 100.3 0 224 0S448 35.8 448 80zM393.2 214.7c20.8-7.4 39.9-16.9 54.8-28.6V288c0 44.2-100.3 80-224 80S0 332.2 0 288V186.1c14.9 11.8 34 21.2 54.8 28.6C99.7 230.7 159.5 240 224 240s124.3-9.3 169.2-25.3zM0 346.1c14.9 11.8 34 21.2 54.8 28.6C99.7 390.7 159.5 400 224 400s124.3-9.3 169.2-25.3c20.8-7.4 39.9-16.9 54.8-28.6V432c0 44.2-100.3 80-224 80S0 476.2 0 432V346.1z"></path></svg>
</h1>
<p class="subtitle lead">MATH/COSC 3570 Introduction to Data Science</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dr.&nbsp;Cheng-Han Yu <br> Department of Mathematical and Statistical Sciences <br> Marquette University </p>
          </div>
  </div>
    
  
    
  </div>
  


</header><section id="section" class="level1" data-visibility="hidden"><h1 data-visibility="hidden"></h1>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section><section id="section-1" class="level1" data-background-color="#A7D5E8" data-background-image="https://raw.githubusercontent.com/hadley/r4ds/main/diagrams/data-science/import.png" data-background-size="contain"><h1 data-background-color="#A7D5E8" data-background-image="https://raw.githubusercontent.com/hadley/r4ds/main/diagrams/data-science/import.png" data-background-size="contain"></h1>
<!-- <h1>Importing</h1> -->
</section><section id="section-2" class="level1" data-background-color="#A7D5E8"><h1 data-background-color="#A7D5E8"></h1>
<img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/readr.png" class="img-fluid" width="180"><img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/readxl.png" class="img-fluid" width="180"><img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/haven.png" class="img-fluid" width="180"><img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/rvest.png" class="img-fluid" width="180"><img src="./images/08-import/arrow.png" class="img-fluid" width="180"><img src="./images/08-import/vroom_logo.png" class="img-fluid" width="180"><img src="./images/08-import/datatable_logo.png" class="img-fluid" width="180"><img src="https://raw.githubusercontent.com/gesistsa/rio/main/man/figures/logo.svg" class="img-fluid" width="180"><img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/googlesheets4.png" class="img-fluid" width="180"><img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/sparklyr.png" class="img-fluid" width="180"><h3 class="anchored" data-anchor-id="section-2">
DBI, jsonline, xml2, httr
</h3>
<h1>
R Data Importing
</h1>
<div class="notes">
<ul>
<li>There are tons of packages and tools out there, and there are lots of data file formats too.</li>
<li>Due to time limit, we will just cover commonly used tools and data file formats. And I think that should be enough for you to do your own project.</li>
<li>If you really need to import a data set that is stored in a very weird format, let me know. And we‚Äôll see how to solve this problem, maybe transform the format into another format. OK.</li>
<li>Here are the packages related to reading and writing files. We‚Äôll talk about some of them today.</li>
</ul>
</div>
</section><section id="section-3" class="level1" data-background-color="#A7D5E8" data-background-image="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/readr.png" data-background-size="30%" data-background-position="75% 50%"><h1 data-background-color="#A7D5E8" data-background-image="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/readr.png" data-background-size="30%" data-background-position="75% 50%"></h1>
<p><a href="https://readr.tidyverse.org/" style="position: absolute; inset: 0; display: block;" aria-label="Readr website"></a></p>
<div class="left">
<h1>
Rectangular Data
</h1>
</div>
<section id="readr-functions" class="level2"><h2 class="anchored" data-anchor-id="readr-functions">
<a href="https://readr.tidyverse.org/">readr üì¶</a> Functions</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 13%">
<col style="width: 63%">
<col style="width: 22%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Format</th>
<th style="text-align: center;">Typical suffix</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="https://readr.tidyverse.org/reference/read_table.html">read_table()</a></code></td>
<td>white space separated values</td>
<td style="text-align: center;">txt</td>
</tr>
<tr class="even">
<td><code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code></td>
<td>comma separated values</td>
<td style="text-align: center;">csv</td>
</tr>
<tr class="odd">
<td><code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv2()</a></code></td>
<td>semicolon separated values</td>
<td style="text-align: center;">csv</td>
</tr>
<tr class="even">
<td><code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_tsv()</a></code></td>
<td>tab delimited separated values</td>
<td style="text-align: center;">tsv</td>
</tr>
<tr class="odd">
<td><code><a href="https://readr.tidyverse.org/reference/read_fwf.html">read_fwf()</a></code></td>
<td>fixed width files</td>
<td style="text-align: center;">txt</td>
</tr>
<tr class="even">
<td><code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim()</a></code></td>
<td>general text file format, must define delimiter</td>
<td style="text-align: center;">txt</td>
</tr>
</tbody>
</table>
<p>. . .</p>
<div class="alert">
<p><strong>Be careful</strong>: The suffix usually tells us what type of file it is, but no guarantee that these always match.</p>
</div>
<div class="cell" data-layout-align="center" data-highlight.output="true">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_lines.html">read_lines</a></span><span class="op">(</span><span class="st">"./data/murders.csv"</span>, n_max <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>  <span class="co">## there is a header</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "state,abb,region,population,total" "Alabama,AL,South,4779736,135"     
[3] "Alaska,AK,West,710231,19"         </code></pre>
</div>
</div>
<div class="notes">
<ul>
<li>readr provides the following functions to read your data into R.</li>
<li>
<strong>Be careful</strong>: The suffix usually tells us what type of file it is, but no guarantee that these always match.</li>
<li>If you don‚Äôt want to open your data file, you can read several lines of your data in R using the function read_lines().</li>
<li>For example, I check the first three lines of the murders.csv file. And yes, it is a comma-separated-value or csv file.</li>
<li>Fixed width text files are special cases of text files where the format is specified by column widths, pad character and left/right alignment. Column widths are measured in units of characters. For example, if you have data in a text file where the first column always has exactly 10 characters, and the second column has exactly 5, the third has exactly 12 (and so on), this would be categorized as a fixed width text file.</li>
</ul>
</div>
</section><section id="reading-data" class="level2"><h2 class="anchored" data-anchor-id="reading-data">Reading Data</h2>
<p><code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> prints out a column specification giving us <strong>delimiter</strong>, <strong>name</strong> and <strong>type</strong> of each column.</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">murders_csv</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"./data/murders.csv"</span><span class="op">)</span></span>
<span><span class="co"># Rows: 51 Columns: 5</span></span>
<span><span class="co"># ‚îÄ‚îÄ Column specification ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span></span>
<span><span class="co"># Delimiter: ","</span></span>
<span><span class="co"># chr (3): state, abb, region</span></span>
<span><span class="co"># dbl (2): population, total</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">murders_csv</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 5
  state      abb   region population total
  &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;
1 Alabama    AL    South     4779736   135
2 Alaska     AK    West       710231    19
3 Arizona    AZ    West      6392017   232
4 Arkansas   AR    South     2915918    93
5 California CA    West     37253956  1257
6 Colorado   CO    West      5029196    65</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">## View data in RStudio</span></span>
<span><span class="fu">view</span><span class="op">(</span><span class="va">murders_csv</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="notes">
<ul>
<li>OK. Let‚Äôs try to read the murders.csv file into R. We use read_csv(), and in the first argument, we tell R its file path. Your path is generally not the same as my path, so you get to change it to your path.</li>
<li>When we run <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code>, it prints out a column specification that gives the <strong>name</strong> and <strong>type</strong> of each column. <!-- - You can see the data set is actually the one in the dslabs package, and we use it in a previous lab exercise, right? -->
</li>
</ul>
</div>
</section><section id="missing-values" class="level2"><h2 class="anchored" data-anchor-id="missing-values">Missing Values</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="question">
<p>Which type is the column vector <code>x</code>? Why?</p>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="./images/08-import/df-na.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment">
<ul>
<li>
<strong>Type coercion</strong><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> happens and all column elements are transformed to character type.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">read_csv</span><span class="op">(</span><span class="st">"./data/df-na.csv"</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre class="my_class500"><code># A tibble: 9 √ó 3
  x     y              z     
  &lt;chr&gt; &lt;chr&gt;          &lt;chr&gt; 
1 1     a              hi    
2 &lt;NA&gt;  b              hello 
3 3     Not applicable 9999  
4 4     d              ola   
5 5     e              hola  
6 .     f              whatup
7 7     g              wassup
8 8     h              sup   
9 9     i              &lt;NA&gt;  </code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>I have a csv file with 3 columns x, y, and z.</li>
<li>It looks like it should be some sort of numeric data. Right I have bunch of numbers here.</li>
<li>Character string NA, but that‚Äôs just an NA. We have a period here, which is usually used as an NA as well.</li>
<li>But when we read this into R, we can see that it‚Äôs being read as a character.</li>
<li>The reason is that the period which is a character shows up, and type coercion happens and all column elements are transformed to character type.</li>
<li>How to solve this kind of problem. We want x to be double and the period is actually a missing value.</li>
<li>Imaging that if you have thousands of lines, you could very easily miss that period.</li>
</ul>
</div>
</section><section id="solution-1-explicit-nas" class="level2"><h2 class="anchored" data-anchor-id="solution-1-explicit-nas">Solution 1: Explicit NAs</h2>
<ul>
<li>By default, <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> only recognizes <strong>‚Äù ‚Äú</strong> and <strong>NA</strong> as a missing value.</li>
<li>Specify the values that are used to represent missing values by argument <code>na</code>.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">read_csv</span><span class="op">(</span><span class="st">"./data/df-na.csv"</span>, </span>
<span>         na <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"NA"</span>, <span class="st">"."</span>, <span class="st">"9999"</span>, <span class="st">"Not applicable"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="./images/08-import/df-na.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre class="my_class500"><code># A tibble: 9 √ó 3
      x y     z     
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1     1 a     hi    
2    NA b     hello 
3     3 &lt;NA&gt;  &lt;NA&gt;  
4     4 d     ola   
5     5 e     hola  
6    NA f     whatup
7     7 g     wassup
8     8 h     sup   
9     9 i     &lt;NA&gt;  </code></pre>
</div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>The function recognize string NA as missing value, but not period or any other character or strings.</li>
<li>One solution is to specify explicitly the value (or values) that are used to represent missing values.</li>
<li>If you know what sort of character are used to denote missing values in your data file, you can give those as part of na argument in the read_csv() function.</li>
<li>For example here, I treat ‚Äú‚Äú,‚ÄùNA‚Äù, ‚Äú.‚Äù, ‚Äú9999‚Äù, ‚ÄúNot applicable‚Äù all as missing values.</li>
<li>And now the class of x is double, and all those character strings are denoted as NA in the loaded data set.</li>
</ul>
</div>
</section><section id="solution-2-specify-column-types" class="level2"><h2 class="anchored" data-anchor-id="solution-2-specify-column-types">Solution 2: Specify Column Types</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">read_csv</span><span class="op">(</span><span class="st">"./data/df-na.csv"</span>, </span>
<span>         col_types <span class="op">=</span> <span class="fu">cols</span><span class="op">(</span><span class="fu">col_double</span><span class="op">(</span><span class="op">)</span>, </span>
<span>                     <span class="fu">col_character</span><span class="op">(</span><span class="op">)</span>, </span>
<span>                     <span class="fu">col_character</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre class="my_class500"><code># A tibble: 9 √ó 3
      x y              z     
  &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt; 
1     1 a              hi    
2    NA b              hello 
3     3 Not applicable 9999  
4     4 d              ola   
5     5 e              hola  
6    NA f              whatup
7     7 g              wassup
8     8 h              sup   
9     9 i              &lt;NA&gt;  </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">problems</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># A tibble: 1 √ó 5</span></span>
<span><span class="co">#     row   col expected actual file </span></span>
<span><span class="co">#   &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;</span></span>
<span><span class="co"># 1     7     1 a double .      "" </span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
<div class="notes">
<ul>
<li>Another solution is to specify column types when you import your data.</li>
<li>This might be handy when you know what your column types should be.</li>
<li>For example, here I can specify the column types using the col_types argument.</li>
<li>All column types are wrapped up in the cols() command, that x is double, y is character and z is character as well.</li>
<li>Ans now you can see x becomes double.</li>
<li>And here we actually get a warning. In row 6 and col x, we expect a double but it is actually a dot or period, which is a character, and so R treats it as NA, which is exactly what I want to do.</li>
<li>But R send a message telling us about this, and make sure this is what we want to do.</li>
<li>This option might be preferable if you cannot scan your data file, or don;t know what convention is being used for missing values in your data file, but you happen to know your column types.</li>
<li>The downside of this is that, here, Not applicable and 9999, they are all treated as valid character values, and they are not missing values. So be careful about this. You may need to manually clean your data.</li>
</ul>
</div>
</section><section id="column-types" class="level2"><h2 class="anchored" data-anchor-id="column-types">Column Types</h2>
<table class="caption-top table">
<thead><tr class="header">
<th><strong>type function</strong></th>
<th><strong>data type</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_character()</a></code></td>
<td>character</td>
</tr>
<tr class="even">
<td><code><a href="https://readr.tidyverse.org/reference/parse_datetime.html">col_date()</a></code></td>
<td>date</td>
</tr>
<tr class="odd">
<td><code><a href="https://readr.tidyverse.org/reference/parse_datetime.html">col_datetime()</a></code></td>
<td>POSIXct (date-time)</td>
</tr>
<tr class="even">
<td><code><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_double()</a></code></td>
<td>double (numeric)</td>
</tr>
<tr class="odd">
<td><code><a href="https://readr.tidyverse.org/reference/parse_factor.html">col_factor()</a></code></td>
<td>factor</td>
</tr>
<tr class="even">
<td><code><a href="https://readr.tidyverse.org/reference/parse_guess.html">col_guess()</a></code></td>
<td><em>let readr guess (default)</em></td>
</tr>
<tr class="odd">
<td><code><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_integer()</a></code></td>
<td>integer</td>
</tr>
<tr class="even">
<td><code><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_logical()</a></code></td>
<td>logical</td>
</tr>
<tr class="odd">
<td><code><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number()</a></code></td>
<td>numbers mixed with non-number characters</td>
</tr>
<tr class="even">
<td><code>col_numeric()</code></td>
<td>double or integer</td>
</tr>
<tr class="odd">
<td><code><a href="https://readr.tidyverse.org/reference/col_skip.html">col_skip()</a></code></td>
<td>do not read</td>
</tr>
<tr class="even">
<td><code><a href="https://readr.tidyverse.org/reference/parse_datetime.html">col_time()</a></code></td>
<td>time</td>
</tr>
</tbody>
</table>
<div class="notes">
<ul>
<li>Here shows all possible column types you can use when importing your data into R. No need to memorize it. But just aware of them, and use them when you need to.</li>
</ul>
</div>
</section><section id="writing-data" class="level2" data-visibility="hidden"><h2 data-visibility="hidden" class="anchored" data-anchor-id="writing-data">Writing Data</h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">## Create tibbles using a row-by-row layout</span></span>
<span><span class="op">(</span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">tribble</span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">x</span>, <span class="op">~</span><span class="va">y</span>,</span>
<span>  <span class="fl">1</span>,  <span class="st">"a"</span>,</span>
<span>  <span class="fl">2</span>,  <span class="st">"b"</span>,</span>
<span>  <span class="fl">3</span>,  <span class="st">"c"</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 2
      x y    
  &lt;dbl&gt; &lt;chr&gt;
1     1 a    
2     2 b    
3     3 c    </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">## same as tibble(x = 1:3, y = c(a, b, c))</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">## save data to "./data/df.csv"</span></span>
<span><span class="va">df</span> <span class="op">|&gt;</span> <span class="fu">write_csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"./data/df.csv"</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="notes">
<ul>
<li>We can also write our data to a csv file as well.</li>
<li>Here I create a tibble called df, and then I use write_csv() function to write the data set df to the file df.csv.</li>
</ul>
</div>
</section><section id="writing-data-1" class="level2"><h2 class="anchored" data-anchor-id="writing-data-1">Writing Data</h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">iris</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">## save iris data to "./data/iris.csv"</span></span>
<span><span class="va">iris</span> <span class="op">|&gt;</span> <span class="fu">write_csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"./data/iris.csv"</span><span class="op">)</span></span>
<span><span class="va">df_iris</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"./data/iris.csv"</span><span class="op">)</span></span>
<span><span class="va">df_iris</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 150 √ó 5
  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
         &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;  
1          5.1         3.5          1.4         0.2 setosa 
2          4.9         3            1.4         0.2 setosa 
3          4.7         3.2          1.3         0.2 setosa 
4          4.6         3.1          1.5         0.2 setosa 
5          5           3.6          1.4         0.2 setosa 
6          5.4         3.9          1.7         0.4 setosa 
7          4.6         3.4          1.4         0.3 setosa 
8          5           3.4          1.5         0.2 setosa 
# ‚Ñπ 142 more rows</code></pre>
</div>
</div>
</section><section id="check-files-using-fs-package" class="level2" data-visibility="hidden"><h2 data-visibility="hidden" class="anchored" data-anchor-id="check-files-using-fs-package">Check Files using <strong>fs</strong> Package <a href="https://github.com/r-lib/fs"><img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/fs.png" class="img-fluid" width="60"></a>
</h2>
<div class="cell" data-layout-align="center" data-highlight.output="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># install.packages("fs")</span></span>
<span><span class="co"># library(fs)</span></span>
<span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_ls.html">dir_ls</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"./data"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">15</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre class="my_class600"><code>./data/2010_bigfive_regents.xls
./data/Batting.csv
./data/BodyData.txt
./data/HRlist2.txt
./data/OnlyTitanic.xlsx
./data/People.csv
./data/RD-Mortality-Report_2015-18-180531.pdf
./data/Salaries.csv
./data/USArrests.csv
./data/approval_topline.csv
./data/bdiag.csv
./data/bikeshare-day.csv
./data/body.csv
./data/carbon_emissions.csv
./data/cars.rds</code></pre>
</div>
</div>
<div class="notes">
<ul>
<li>You can fs package to do file system operations directly in R, so you don‚Äôt need to do operations in your bash or zsh in terminal.</li>
<li>Here I list all files stored in the data folder, and make sure that df.csv is there.</li>
</ul>
</div>
</section><section id="read_rds-and-write_rds" class="level2" data-visibility="hidden"><h2 data-visibility="hidden" class="anchored" data-anchor-id="read_rds-and-write_rds">
<code>read_rds()</code> and <code>write_rds()</code>
</h2>
<ul>
<li>We save an R object (usually a data set) in <code>.Rds</code> in the R binary file format. <a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>
</li>
</ul>
<div class="cell" data-layout-align="center" data-highlight.output="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_rds.html">write_rds</a></span><span class="op">(</span><span class="va">cars</span>, </span>
<span>                 file <span class="op">=</span> <span class="st">"./data/cars.rds"</span><span class="op">)</span> </span>
<span><span class="co"># fs::dir_ls(path = "./data") |&gt; head(10)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><br></p>
<p>. . .</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">my_car</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_rds.html">read_rds</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"./data/cars.rds"</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">my_car</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  speed dist
1     4    2
2     4   10
3     7    4</code></pre>
</div>
</div>
<div class="notes">
<ul>
<li>We save an R object (usually a data set) in <code>.Rds</code>m the R binary file format.</li>
<li>Remember we talked about RData format last time, right?</li>
<li>R provides two file formats of its own for storing data, .RDS and .RData. RDS files can store a single R object, and RData files can store multiple R objects.</li>
<li>Usually, if we save a data set, we use .Rds, and if we save several objects, and the objects are some variables or functions, we use .RData.</li>
<li>Read the data back into R.</li>
</ul>
</div>
</section><section id="section-4" class="level2"><h2 class="anchored" data-anchor-id="section-4"></h2>
<div class="lab">
<p><span style="color:blue"> <strong>10-Import Data</strong> </span></p>
<!-- - Create a R script named **lab08-importdata.R** -->
<ul>
<li>If you haven‚Äôt, install and load the <code>tidyverse</code> package.</li>
</ul>
<p>In <strong>lab.qmd</strong> <code>## Lab 10</code> section, <!-- - If you haven't, upload data.zip posted in D2L Week 5 module to your lab project workspace. --> <!-- - Run the following code to see the data sets saved in the `dslabs` package: --> <!-- ```{r, eval=FALSE} --> <!-- path <- system.file("extdata", package = "dslabs") --> <!-- files <- list.files(path) --> <!-- files --> <!-- ``` --> <!-- - Use `file.path()` to create the file path for the file **"ssa-death-probability.csv"**.  --></p>
<ul>
<li>Import <strong>ssa_male_prob.csv</strong> in the data folder using <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> and call it <code>ssa_male</code>.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>ssa_male <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read____</span>(____________)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li>Plot <code>Age</code> (x-axis) vs.&nbsp;<code>LifeExp</code> (y-axis). The type is ‚Äúline‚Äù, and the line color is blue. Add x-label, y-label and title to your plot.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> _____, <span class="at">y =</span> _____, <span class="at">type =</span> ______, <span class="at">col =</span> ______,</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> ______, <span class="at">ylab =</span> _______, <span class="at">main =</span> ____________)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<!-- - Use `lines()` to add a line of `Age` (x-axis) vs. `LifeExp` (y-axis) for `Male` to the plot. The color is blue. -->
<!-- ```{r} -->
<!-- #| eval: false -->
<!-- #| purl: false -->
<!-- #| code-line-numbers: false -->
<!-- lines(x = _____, y = _____, col = ______) -->
<!-- ``` -->
<ul>
<li>Save the data <code>penguins_raw</code> in the R <a href="https://allisonhorst.github.io/palmerpenguins/"><code>palmerpenguins</code> package</a> to ‚Äú./data/penguins_df.csv‚Äù. Print <code>penguins_df.csv</code> out.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">_________</span>(palmerpenguins)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write______</span>()</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>penguins_df</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div class="notes">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="va">ssa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"./data/ssa-death-probability.csv"</span><span class="op">)</span></span>
<span><span class="va">ssa_male</span> <span class="op">&lt;-</span> <span class="va">ssa</span><span class="op">[</span><span class="va">ssa</span><span class="op">$</span><span class="va">Sex</span> <span class="op">==</span> <span class="st">"Male"</span>, <span class="op">]</span></span>
<span><span class="va">ssa_female</span> <span class="op">&lt;-</span> <span class="va">ssa</span><span class="op">[</span><span class="va">ssa</span><span class="op">$</span><span class="va">Sex</span> <span class="op">==</span> <span class="st">"Female"</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">ssa_female</span><span class="op">$</span><span class="va">Age</span>, y <span class="op">=</span> <span class="va">ssa_female</span><span class="op">$</span><span class="va">LifeExp</span>, </span>
<span>     type <span class="op">=</span> <span class="st">"l"</span>, col <span class="op">=</span> <span class="fl">2</span>, lwd <span class="op">=</span> <span class="fl">3</span>,</span>
<span>     xlab <span class="op">=</span> <span class="st">"Age"</span>, ylab <span class="op">=</span> <span class="st">"Life Exp"</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"Age vs. Life Exp by Gender"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="va">ssa_male</span><span class="op">$</span><span class="va">Age</span>, <span class="va">ssa_male</span><span class="op">$</span><span class="va">LifeExp</span>, col <span class="op">=</span> <span class="fl">4</span>, lwd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section></section><section id="section-5" class="level1" data-background-color="#A7D5E8" data-background-image="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/readxl.png" data-background-size="30%" data-background-position="70% 50%"><h1 data-background-color="#A7D5E8" data-background-image="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/readxl.png" data-background-size="30%" data-background-position="70% 50%"></h1>
<p><a href="https://readxl.tidyverse.org/" style="position: absolute; inset: 0; display: block;" aria-label="arrow website"></a></p>
<div class="left">
<h1>
Read Excel Data
</h1>
</div>
<div class="notes">
<ul>
<li>Last time, we use the readr package to import our data into R, right?</li>
<li>What if you have a data set stored in microsoft excel, well we can use read excel package to read your data.</li>
</ul>
</div>
<section id="readxl-functions" class="level2"><h2 class="anchored" data-anchor-id="readxl-functions">
<a href="https://readxl.tidyverse.org/">readxl üì¶</a> Functions</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 13%">
<col style="width: 63%">
<col style="width: 22%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Format</th>
<th style="text-align: center;">Typical suffix</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code></td>
<td>auto detect the format</td>
<td style="text-align: center;">xls, xlsx</td>
</tr>
<tr class="even">
<td><code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_xls()</a></code></td>
<td>original format</td>
<td style="text-align: center;">xls</td>
</tr>
<tr class="odd">
<td><code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_xlsx()</a></code></td>
<td>new format</td>
<td style="text-align: center;">xlsx</td>
</tr>
</tbody>
</table>
<ul>
<li>The Microsoft Excel can have more than one sheet in one file.</li>
<li>The functions above read the <strong>first</strong> sheet by default.</li>
<li>The <code><a href="https://readxl.tidyverse.org/reference/excel_sheets.html">excel_sheets()</a></code> gives us the names of all the sheets in an Excel file.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org">readxl</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://readxl.tidyverse.org/reference/excel_sheets.html">excel_sheets</a></span><span class="op">(</span><span class="st">"./data/2010_bigfive_regents.xls"</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sheet1" "Sheet2" "Sheet3"</code></pre>
</div>
</div>
<div class="notes">
<ul>
<li>Here shows the main read excel functions. They are pretty similar to readr functions, but this time, your data file is not a text file, but a microsoft excel file.</li>
<li>The Microsoft Excel can have more than one sheet in one file.</li>
<li>The functions listed above read the <strong>first </strong>sheet by default.</li>
<li>If you don‚Äôt want open your excel file and check its sheet names, the <code><a href="https://readxl.tidyverse.org/reference/excel_sheets.html">excel_sheets()</a></code> function gives us the names of all the sheets in an Excel file.</li>
</ul>
</div>
</section><section id="sheet-names" class="level2"><h2 class="anchored" data-anchor-id="sheet-names">Sheet Names</h2>
<ul>
<li>The sheet names can be passed to the <code>sheet</code> argument to read sheets other than the first.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readxl.tidyverse.org/reference/excel_sheets.html">excel_sheets</a></span><span class="op">(</span><span class="st">"./data/2010_bigfive_regents.xls"</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sheet1" "Sheet2" "Sheet3"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="op">(</span><span class="va">data_xls</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_xls</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"./data/2010_bigfive_regents.xls"</span>, </span>
<span>                      sheet <span class="op">=</span> <span class="st">"Sheet3"</span>, </span>
<span>                      skip <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19 √ó 6
  Scores `131024` `113804` `104201` `103886` `91756`
   &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;
1     10       NA       64        8      227      34
2     11        6       83       11      217      58
3     12       23       87        7       28      67
4     13        1       54       16      230      42
5     14        3      145       18      303      57
6     15       58      151       50      192      98
7     16        1      129       13      156     125
8     17       73      214       59      163     115
# ‚Ñπ 11 more rows</code></pre>
</div>
</div>
<div class="notes">
<ul>
<li>The sheet names can be passed to the <code>sheet</code> argument in the functions to read sheets other than the first.</li>
<li>For example, here we ask R to read the Sheet1 in the favourite-food excel file.</li>
<li>We can also specify an integer that indicates the position of the sheet.</li>
<li>We don‚Äôt have a lab exercise on this. You have data and code is right here. You can practice and see if you can read the excel file. range = cell_rows(102:151)</li>
</ul>
</div>
</section></section><section id="section-6" class="level1" data-background-color="#ffde57" data-background-image="https://upload.wikimedia.org/wikipedia/commons/e/ed/Pandas_logo.svg" data-background-size="40%" data-background-position="70% 50%"><h1 data-background-color="#ffde57" data-background-image="https://upload.wikimedia.org/wikipedia/commons/e/ed/Pandas_logo.svg" data-background-size="40%" data-background-position="70% 50%"></h1>
<p><a href="https://pandas.pydata.org/docs/reference/api/pandas.read_csv.html" style="position: absolute; inset: 0; display: block;" aria-label="arrow website"></a></p>
<div class="left">
<h2 class="anchored" data-anchor-id="section-6">
<code>pd.read_csv</code>
</h2>
<!-- <h2>`pd.read_excel`</h2> -->
<h2 class="anchored">
<code>pd.DataFrame.to_csv</code>
</h2>
</div>
<section id="pd.read_csv" class="level2"><h2 class="anchored" data-anchor-id="pd.read_csv"><code>pd.read_csv</code></h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>py_df <span class="op">=</span> pd.read_csv(<span class="st">'./data/murders.csv'</span>)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(py_df.head())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>        state abb region  population  total
0     Alabama  AL  South     4779736    135
1      Alaska  AK   West      710231     19
2     Arizona  AZ   West     6392017    232
3    Arkansas  AR  South     2915918     93
4  California  CA   West    37253956   1257</code></pre>
</div>
</div>
</section><section id="pd.dataframe.to_csv" class="level2"><h2 class="anchored" data-anchor-id="pd.dataframe.to_csv"><code>pd.DataFrame.to_csv</code></h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>w <span class="op">=</span> {<span class="st">"x"</span>:[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>     <span class="st">"y"</span>:[<span class="st">'a'</span>, <span class="st">'b'</span>,<span class="st">'c'</span>]}</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>wdf <span class="op">=</span> pd.DataFrame(w)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>wdf.to_csv(<span class="st">"./data/wdf.csv"</span>)</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>mydf <span class="op">=</span> pd.read_csv(<span class="st">'./data/wdf.csv'</span>)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mydf.head())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Unnamed: 0  x  y
0           0  1  a
1           1  2  b
2           2  3  c</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">## index = False means don't write row names</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>wdf.to_csv(<span class="st">"./data/wdf.csv"</span>, index <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>mydf <span class="op">=</span> pd.read_csv(<span class="st">'./data/wdf.csv'</span>)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mydf.head())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   x  y
0  1  a
1  2  b
2  3  c</code></pre>
</div>
</div>
<!-- ## `pd.read_excel` {visibility="hidden"} -->
<!-- :::{.callout-warning} -->
<!-- :::{style="font-size: 1.2em;"} -->
<!-- [`pd.read_excel()`](https://pandas.pydata.org/docs/reference/api/pandas.read_excel.html) needs other libraries installed. -->
<!-- -  `openpyxl` for `.xlsx` format -->
<!-- -  `xlrd` for `xls` format -->
<!-- - `py_install("xlrd")` in R or `pip install pandas` or `conda install pandas` in the terminal. -->
<!-- ::: -->
<!-- ::: -->
<!-- ```{r} -->
<!-- #| echo: false -->
<!-- py_install("xlrd") -->
<!-- ``` -->
<!-- ```{python} -->
<!-- df_x = pd.read_excel('./data/2010_bigfive_regents.xls', engine='xlrd', -->
<!-- sheet_name="Sheet3", skiprows=1) -->
<!-- df_x.head() -->
<!-- ``` -->
<!-- ::: notes -->
<!-- ImportError: Missing optional dependency 'openpyxl'.  Use pip or conda to install openpyxl. -->
<!-- https://stackoverflow.com/questions/65250207/pandas-cannot-open-an-excel-xlsx-file -->
<!-- ::: -->
<!-- # Other Importing Methods* -->
</section><section id="section-7" class="level2"><h2 class="anchored" data-anchor-id="section-7"></h2>
<div class="genai">
<p><span style="color:green"> <strong>10-Import Data</strong> </span></p>
<blockquote class="blockquote">
<p><code>&gt;</code> I have a R object that cannot be saved as a csv or excel file, for example, a list. How can I save that object, and reuse it later? Please teach me with a simple example.</p>
</blockquote>
<p><br></p>
<ul>
<li>Share what you learned from AI!~</li>
</ul>
</div>
<div class="notes">
<p>When NOT to use CSV/Excel Objects with nested structures (lists, models, tibbles with list-columns). Data requiring preservation of attributes (factor levels, classes like Date, POSIXct, sf, etc.).</p>
</div>
</section></section><section id="section-8" class="level1" data-background-color="" data-background-image="./images/08-import/arrow.png" data-background-size="30%" data-background-position="70% 50%"><h1 data-background-color="" data-background-image="./images/08-import/arrow.png" data-background-size="30%" data-background-position="70% 50%"></h1>
<p><a href="https://arrow.apache.org/" style="position: absolute; inset: 0; display: block;" aria-label="arrow website"></a></p>
<div class="left">
<!-- <h2>Fast Reading and Writing</h2> -->
<!-- <h2>Data Format in R and Python*</h2> -->
<h1>
Big Data*
</h1>
</div>
<section id="apache-arrow-for-r-and-python" class="level2"><h2 class="anchored" data-anchor-id="apache-arrow-for-r-and-python">
<a href="https://arrow.apache.org/">Apache Arrow</a> for <a href="https://arrow.apache.org/docs/r/">R</a> and <a href="https://arrow.apache.org/docs/python/">Python</a>
</h2>
<ul>
<li>Apache Arrow develops big data systems to process and move data fast.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="./images/08-import/speed.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<!-- - Arrow -->
<!--   + allows users to read and write data in a variety formats -->
<!--   + provides data analysis tools for both in-memory and larger-than-memory data sets -->
<!--   + provides access to remote filesystems and servers -->
<!--   + zero-copy data sharing between R and Python -->
<!-- - [R package](https://arrow.apache.org/docs/r/) -->
<!-- ```{r} -->
<!-- #| eval: false -->
<!-- install.packages("arrow") -->
<!-- library(arrow) -->
<!-- ``` -->
<!-- - [Python package](https://arrow.apache.org/docs/python/) -->
<!-- ```bash -->
<!-- pip install pyarrow -->
<!-- ``` -->
<!-- ```{python} -->
<!-- #| eval: false -->
<!-- import pyarrow as pa -->
<!-- ``` -->
<!-- ## feather üì¶ {visibility="hidden"} -->
<!-- - [**feather**](https://github.com/wesm/feather) is a binary file format for storing data frames. -->
<!--   + **Lightweight**: file size is smaller than CSV files (but larger than R native binary .Rds/.RData files) -->
<!--   + **Language agnostic**: feather files are the same in R and Python -->
<!--   + **High read and write performance**: faster than `read_csv()` and `read_rds()`. -->
<!-- ```{r} -->
<!-- #| label: feather -->
<!-- #| purl: false -->
<!-- library(feather) -->
<!-- challenge <- read_csv(file = readr_example("challenge.csv"), -->
<!--                       col_types = readr::cols(x = readr::col_double(),  -->
<!--                                               y = readr::col_date())) -->
<!-- # It is a `.feather` file -->
<!-- feather::write_feather(x = challenge,  -->
<!--                        path = "./data/challenge.feather") -->
<!-- ``` -->
<!-- ## Read `.feather` Data in Python {visibility="hidden"} -->
<!-- ```{r} -->
<!-- #| echo: false -->
<!-- reticulate::py_install("pyarrow") -->
<!-- ``` -->
<!-- ```{python} -->
<!-- ## Need to install PyArrow package  -->
<!-- import pyarrow.feather as feather -->
<!-- py_feather_df = feather.read_feather("./data/challenge.feather") -->
<!-- py_feather_df.head() -->
<!-- ``` -->
<!-- ## How Fast is feather ?! {visibility="hidden"} -->
<!-- ```{r, purl=FALSE} -->
<!-- ## Unit: seconds -->
<!-- ##                  expr   min    lq       mean median    uq   max neval -->
<!-- ## readr::read_csv()      27.0  28.0  29.770890   29.0  32.0  33.0    10 -->
<!-- ## base::readRDS()         4.6   4.7   5.053674    5.1   5.3   5.6    10 -->
<!-- ## feather::read_feather   1.5   1.8   2.988021    3.4   3.6   4.1    10 -->
<!-- ``` -->
<!-- # {background-color="#A7D5E8"} {visibility="hidden"} -->
<!-- ![](https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/haven.png){width="180"}![](https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/rvest.png){width="180"}![](./images/08-import/vroom_logo.png){width="180"}![](./images/08-import/datatable_logo.png){width="180"}![](./images/08-import/rio_logo.png){width="180"}![](https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/googlesheets4.png){width="180"}![](https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/sparklyr.png){width="180"} -->


<script type="ojs-module-contents">
eyJjb250ZW50cyI6W119
</script><div id="exercise-loading-indicator" class="exercise-loading-indicator d-none d-flex align-items-center gap-2">
<div id="exercise-loading-status" class="d-flex gap-2">

</div>
<div class="spinner-grow spinner-grow-sm">

</div>
</div>
<script type="vfs-file">
W10=
</script></section></section><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>
<ol>
<li id="fn1"><p>A column with elements having different types, they‚Äôll be coerced to <em>the most flexible</em> type. Types from least to most flexible: <em>logical ‚Äì integer ‚Äì double ‚Äì character</em>.<a href="#fnref1" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn2"><p>Check R built-in data sets using command <code><a href="https://rdrr.io/r/utils/data.html">data()</a></code>.<a href="#fnref2" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
</ol></section></div></main><!-- /main --><script type="ojs-module-contents">
eyJjb250ZW50cyI6W119
</script><script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../slides";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script><script>
  // htmlwidgets need to know to resize themselves when slides are shown/hidden.
  // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
  // slide changes (different for each slide format).
  (function () {
    // dispatch for htmlwidgets
    function fireSlideEnter() {
      const event = window.document.createEvent("Event");
      event.initEvent("slideenter", true, true);
      window.document.dispatchEvent(event);
    }

    function fireSlideChanged(previousSlide, currentSlide) {
      fireSlideEnter();

      // dispatch for shiny
      if (window.jQuery) {
        if (previousSlide) {
          window.jQuery(previousSlide).trigger("hidden");
        }
        if (currentSlide) {
          window.jQuery(currentSlide).trigger("shown");
        }
      }
    }

    // hookup for slidy
    if (window.w3c_slidy) {
      window.w3c_slidy.add_observer(function (slide_num) {
        // slide_num starts at position 1
        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
      });
    }

  })();
</script><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/math3570-s26\.github\.io\/website\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>¬© Copyright 2026, Cheng-Han Yu</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions"><ul><li><a href="https://github.com/math3570-s26/website/edit/main/slides/08-import.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/math3570-s26/website/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This page is built with ‚ù§Ô∏è and <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>


</body></html>