---
title: "Quarto `r emo::ji('book')`"
title-slide-attributes:
  data-background-image: ../images/bg.png
  # data-background-size: stretch
  # data-slide-number: none
format: 
  live-revealjs: 
    output-file: 05-quarto-slides.html
webr:
  cell-options:
    autorun: false
  packages:
    - tidyverse
# execute:
#   engine: jupyter
---

#  {visibility="hidden"}

\def\bx{\mathbf{x}}
\def\bg{\mathbf{g}}
\def\bw{\mathbf{w}}
\def\bbeta{\boldsymbol \beta}
\def\bX{\mathbf{X}}
\def\by{\mathbf{y}}
\def\bH{\mathbf{H}}
\def\bI{\mathbf{I}}
\def\bS{\mathbf{S}}
\def\bW{\mathbf{W}}
\def\T{\text{T}}
\def\cov{\mathrm{Cov}}
\def\cor{\mathrm{Corr}}
\def\var{\mathrm{Var}}
\def\E{\mathrm{E}}
\def\bmu{\boldsymbol \mu}
\DeclareMathOperator*{\argmin}{arg\,min}
\def\Trace{\text{Trace}}



```{r}
#| label: setup
#| include: false
#| eval: true
library(countdown)
library(emo)
library(knitr)
library(gt)
library(gtExtras)
library(ggplot2)
library(tidyverse)
library(tidymodels)
library(fontawesome)
library(rmarkdown)
library(reticulate)
# library(ISLR2)
# library(genridge)
# library(glmnet)
# library(gam)
# library(splines)
# library(MASS)

# library(ElemStatLearn)
knitr::opts_chunk$set(
    fig.asp = 0.618,
    fig.align = "center",
    out.width = "100%",
    fig.retina = 10,
    fig.path = "images/05-quarto/",
    message = FALSE,
    global.par = TRUE
)
options(
  htmltools.dir.version = FALSE,
  dplyr.print_min = 6, 
  dplyr.print_max = 6,
  tibble.width = 80,
  width = 80,
  digits = 3
  )
hook_output <- knitr::knit_hooks$get("output")
knitr::knit_hooks$set(output = function(x, options) {
  lines <- options$output.lines
  if (is.null(lines)) {
    return(hook_output(x, options))  # pass to default hook
  }
  x <- unlist(strsplit(x, "\n"))
  more <- "..."
  if (length(lines)==1) {        # first n lines
    if (length(x) > lines) {
      # truncate the output, but add ....
      x <- c(head(x, lines), more)
    }
  } else {
    x <- c(more, x[lines], more)
  }
  # paste these lines together
  x <- paste(c(x, ""), collapse = "\n")
  hook_output(x, options)
})
```

# Hello Quarto {background-color="#A7D5E8"}

::: center

![](https://raw.githubusercontent.com/rstudio/hex-stickers/main/thumbs/quarto.png){width="350"}![](https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/rmarkdown.png){width="350"}![](https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/knitr.png){width="350"}

:::

::: notes
Why Quarto is a Amazing Tool for Data Science Basic syntax: Markdown and Code 

- Last time we learned git and github to version control our documents. 

- You first grab hw0 from github, and load it into Rstudio as a project. In the document hw0, you actually opened an Quarto file, right, you make changes, revise it and keep track of your changes by making commits. Then finally you send your updated version of document back to github, so that the version locally in your computer is synchronized with the one in your github. right? 

- Today we are going to talk about Quarto, the one you opened last time. 

- I'll introduce some basic stuff, and you'll learn how to generate a beautiful html or PDF report that includes code, tables, figures generated by the code all together. 

- And each of your homework sets will be a qmd file. That's why I talk about Quarto before we actually touch data and do data analysis. 

- Let's learn this great tool together!
:::


<!-- ## -->

<!-- * unordered list -->
<!--   + sub-item 1 -->
<!--     + sub-item 2 -->
<!--         - sub-sub-item 1 -->

<!-- ## -->

<!-- *   item 2 -->

<!--     Continued (indent 4 spaces) -->


<!-- * item 1 -->

<!--   Continued (indent 4 spaces) -->

<!-- * item 1 -->
<!--   Continue -->
  
## Sharing Data Science Products using Quarto

```{r}
#| out-width: 100%
#| fig-align: center
knitr::include_graphics("https://raw.githubusercontent.com/hadley/r4ds/main/diagrams/data-science/communicate.png")
```

::: notes
-   Remember that in DS, our ultimate goal is share our data science outputs and communicate with others.
-   Today, we are going to learn Quarto that is an amazing tool for generating various different kinds of data science output.
:::



## What and Why -- Full Reproducibility

::::: columns

:::: {.column width="50%"}

-   **\[What\]** data science publishing system
-   Use a [single]{style="color:green"} Quarto file (`.qmd`) to
    -   weave together narrative [*text* and *code*]{.green}
    -   produce *elegantly formatted outputs*: word/pdf, webpages, blogs, books, etc.
-   **\[Why\]** **Fully reproducible** reports
    -   Have *code*, *results*, and *text* in the same document
    -   Results are generated from the source code, and your documents are [automatically]{style="color:green"} updated if your data or code changed.
    
::::

:::: {.column width="50%"}

::: logo

```{r}
#| out-width: 70%
#| fig-link: https://quarto.org/
knitr::include_graphics("https://raw.githubusercontent.com/rstudio/hex-stickers/main/thumbs/quarto.png")
```

:::

::::

:::::

::: notes

-   WHAT
-   Remember in the last stage of DS, we need to communicate our DS results with others.
-   qmd is a very useful communication tool that integrates prose/words, code, and analysis results.
-   WHY
-   Results are generated from the source code, and your documents are **automatically** updated if your data changed.
-   So if your data or code changed, or you need to redo your analysis or rerun your algorithm, you don't need to actually redo your analysis and copy all of your numbers, tables and figures generated from your code and paste them manually to your Word or Powerpoint file.
-   Since your code, results, and text are all in one qmd file, if your data change, your results will be automatically updated with that change. No more copy and paste.
-   This greatly saves lots of time. Also, it reduces the chance of making mistakes of copying and pasting, and increases reproducibility of your study, meaning that your code can produce exactly the same result shown in your document.
-   Literate Programming

:::



## 

<iframe width="1800" height="1000" src="https://www.youtube.com/embed/s3JldKoA0zw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>

</iframe>


::: notes

I found an error in the data and added two more cases. Find the attached the modified excel. Can you redo the analysis?

- Excel to R
- Re-Make the graphs and re-run all the analysis
- Copy and paste every updated output from R to your document
This is an non-reproducible way fo doing data science.

But there is another way, a better way, a reproducible way.

:::




## Why Quarto -- Various Types of Output

-   Support dozens of *static and dynamic/interactive* output formats!

```{r}
#| out-width: 40%
knitr::include_graphics("images/05-quarto/rmarkdown_output.png")
```
![](https://raw.githubusercontent.com/rstudio/hex-stickers/main/thumbs/quarto.png){.absolute top="435" right="815" width="180"}


::: notes

-   One more reason to use Quarto is qmd can generate various types of output!
-   It can produce a PDF, blog, HTML. It can generate slides, website, dashboard, word document, e-books. You name it!
-   So once you learn this Rmarkdown, you can prepare any type of output you want for different purposes. You can prepare a paper for submitting it to a journal, prepare slides for your presentation, prepare a website/dashboard for data science results.
-   It's really handy! In fact, the slides I make for this course are all qmd files.

:::


## Moving Between Formats Straightforward

:::: columns

::: {.column width="33%"}

HTML Document

::: {.code-file .sourceCode .cell-code}

`r fontawesome::fa("file")` datascience.qmd

:::

``` yaml
title: "Data Science"
format: html
```

:::

::: {.column width="33%"}

::: fragment

Presentation Slides

::: {.code-file .sourceCode .cell-code}
`r fontawesome::fa("file")` datascience.qmd
:::

``` yaml
title: "Data Science"
format: revealjs
```

:::

:::

::: {.column width="33%"}

::: fragment

Website

::: {.code-file .sourceCode .cell-code}
`r fontawesome::fa("file")` _quarto.yml
:::

``` yaml
project:
  type: website

website: 
  navbar: 
    left:
      - datascience.qmd
```

:::

:::

::::

::: notes
--\> a lesson in document form <br>
--\> the same content in presentation form <br>
--\> the same content on a page in a website,

and you can see that all that needed to change going between these formats is a few lines in the yaml.
Nothing in the content part of my document.
No slide breaks to remove, no citation style to change, no headings to re-level.
This ease of transition has freed up time to focus my time on content, and that, folks, is the dream!
:::


## Why Quarto[^1] -- Integrate Multiple Languages

[^1]: Quarto is actually a **command line interface** that can render `.qmd` files into different output formats using commands in terminal.

![](images/05-quarto/horst_quarto_schematic.png)



## Quarto Is Built on [Pandoc](https://pandoc.org/)  {visibility="hidden"}

-   R uses `knitr` and Python/Julia uses `Jupyter` to evaluate our code and turn `qmd` into `md` file.

![](images/05-quarto/horst_qmd_render_schema.png)

::: notes

-   So what does Quarto do so amazingly for us?
-   When we hit Knit, your qmd first uses the knitr package to execute and translate our code, and then creates a new markdown document which includes the code and its output.
-   The markdown file is then processed by a document converter called pandoc which is responsible for creating various document format you like.
-   The entire process looks and sounds complicated, and indeed it's complicated. But qmd makes it simple. All we need is to click on the Knit button, and qmd does everything for us.

:::



## Why Quarto -- Comfort of Your Own Workspace

::: r-stack

![](https://quarto.org/docs/tools/images/rstudio-preview.png){width="1500" fig-alt="A screenshot of a Quarto document rendered inside RStudio"}

![](https://quarto.org/docs/tools/images/jupyterlab-preview.png){.fragment width="1500" fig-alt="A screenshot of a Quarto document rendered inside JupyterLab"}

![](https://quarto.org/docs/computations/images/python-vscode.png){.fragment width="1500" fig-alt="A screenshot of a Quarto document rendered inside VSCode"}
:::



## Why Quarto -- Simple Markdown Syntax for Text

To generate a PDF report, you prefer writing this with 24 lines...

::: columns


::: {.column width="50%"}

```{r}
#| out-width: 80%
knitr::include_graphics("images/05-quarto/pdf_output.png")
```

:::

::: {.column width="50%"}

```{r}
#| out-width: 80%
knitr::include_graphics("images/05-quarto/qmd_source.png")
```

:::

:::

::: notes

-   Another reason to use Quarto is that its syntax is simple.
-   We can generate this PDF report including code and figures using this concise qmd file on the right.

:::




## Why Quarto -- Simple Markdown Syntax for Text

Or this with 250 lines!?

::: columns

::: {.column width="50%"}

```{r}
#| out-width: 80%
knitr::include_graphics("images/05-quarto/pdf_output.png")
```

:::

::: {.column width="50%"}

```{r}
#| out-width: 70%
knitr::include_graphics("images/05-quarto/tex_source.png")
```

:::

:::

::: notes

-   We can also generate the same PDF report using this document processing format.
-   Which one you prefer?
-   Does anyone know what tool is used for generating the PDF? It's called LaTex.
-   You can see the qmd file is cleaner and much more concise.

:::



## Markdown

::: columns

::: {.column width="70%"}

-   Quarto is based on **markdown**, a markup language that is widely used to generate HTML pages.
-   Markdown is a *lightweight* and *easy-to-use* syntax for styling the writing on GitHub.
-   Go through basic Markdown syntax together, and you can learn more at:
    -   [Markdown Tutorial](https://www.markdowntutorial.com/)
    -   [Mastering Markdown GitHub Guides](https://guides.github.com/features/mastering-markdown/)
    -   [Markdown Guide](https://www.markdownguide.org/getting-started/)

:::

::: {.column width="30%"}

<br>

```{r}
#| out-width: 100%
knitr::include_graphics("images/05-quarto/markdown.png")
```

:::

:::

::: notes

-   In my opinion, comparing to HTML, Markdown format is more friendly and easier to learn.

:::




## Quarto file = plain text file with extension *.qmd*

::: middle
    ---
    title: "ggplot2 demo"
    date: "1/22/2026"
    format: html
    ---

    ## Cars
    There is a relationship between *miles per gallon* and *displacement*.

    ```{{r}}
    mpg |> ggplot(aes(x = displ, y = hwy)) + 
      geom_point()
    ```

:::

. . .

::: {style="background: #a13c6530; width: 500px; height: 180px; margin: 5px; position: absolute; top: 105px; left: 0px;"}
:::

:::{.small}

[**YAML Header ("YAML Ain't Markup Language")**]{.pink}

``` yaml
---
key: value
---
```

:::


::: notes

-   The first part is the YAML header, which is surrounded by a pair of three dashes.
-   YAML is a human readable language that is commonly used in configuration files of programs.
-   Here, YAML header defines metadata of the document, for example, title, date, and output format.

:::

. . .

::: {style="background: rgba(63, 151, 252, 0.3); width: 1600px; height: 90px; margin: 5px; position: absolute; top: 300px; left: 0px;"}
:::

:::{.small}

[**Markdown Text**]{.blue}

:::


::: notes

-   The second part is text.
-   And as we've discussed, the syntax for text is Markdown. We'll learn some basic syntax later.

:::

. . .

::: {style="background: #6a9c4230; width: 850px; height: 150px; margin: 5px; position: absolute; top: 420px; left: 0px;"}
:::

:::{.small}

[**Code Chunk**]{.green}

```{r}
#| echo: fenced
## code right here
```

:::


::: notes

-   The third main part of a qmd document is the so-called code chunk. which is surrounded by a pair of three backticks.
-   The code written in code chunks will be run once you compile your qmd file, and any output generated by your code will be printed out in the final document. All right!
-   Any questions

:::


## 

::: lab
[ **02-Quarto File** ]{style="color:blue"}

- Go to your GitHub repo **lab-yourusername**. Clone it to your Posit Cloud as a project in **2026-spring-math-3570** workspace.

- Open the file **lab.qmd**.

- Change `author` in YAML.



<!-- - Go to your **3570-project** in **2022-spring-math-3570** workspace in Posit Cloud. -->

<!-- - Copy the code  -->

<!-- -   ![](images/05-quarto/new_file_icon.png) \> Quarto Document (or File \> New File \> Quarto Document) -->

<!-- -   Title: **lab02-quarto** -->

<!-- -   Author: **your name** -->

<!-- -   Click on OK. You should see a template in the file. -->

<!-- -   Save your file named as **lab02-quarto.qmd**. -->

- Click on ![](images/05-quarto/render.png) or `Ctrl/Cmd + Shift + K` to produce a HTML document.

- How can we show the current date every time we compile the file? *\[Hint:\]* Check your *hw01*. Compile your document and make sure the date shows up.

<!-- - How do we produce a *pdf*? Describe it in `## Lab 2: Quarto` -->

- How do we [fold the code](https://quarto.org/docs/reference/formats/html.html#code) so that the document is shorter? Describe it in `## Lab 2: Quarto`

- Once done, **commit** with message [_"02-quarto"_]{style="color:green"} and **push** it to GitHub.
:::

::: notes

-   Click on the **inverted triangle** right next to render to produce a PDF/Word document.

``` markdown
r Sys.Date()
```

date: "`r Sys.Date()`"

date: today

:::



## [Text Formatting](https://quarto.org/docs/authoring/markdown-basics.html#text-formatting)

+-----------------------------------+-------------------------------+
| Markdown Syntax                   | Output                        |
+===================================+===============================+
|     *italics* and **bold**        | *italics* and **bold**        |
+-----------------------------------+-------------------------------+
|     superscript^2^ / subscript~2~ | superscript^2^ / subscript~2~ |
+-----------------------------------+-------------------------------+
|     ~~strikethrough~~             | ~~strikethrough~~             |
+-----------------------------------+-------------------------------+
|     `verbatim code`               | `verbatim code`               |
+-----------------------------------+-------------------------------+
|     > here is the quote           | > here is the quote           |
+-----------------------------------+-------------------------------+



## [Headings](https://quarto.org/docs/authoring/markdown-basics.html#headings)

+---------------------+-----------------+
| Markdown Syntax     | Output          |
+=====================+=================+
|     # Header 1      | # Header 1      |
+---------------------+-----------------+
|     ## Header 2     | ## Header 2     |
+---------------------+-----------------+
|     ### Header 3    | ### Header 3    |
+---------------------+-----------------+
|     #### Header 4   | #### Header 4   |
+---------------------+-----------------+
|     ##### Header 5  | ##### Header 5  |
+---------------------+-----------------+
|     ###### Header 6 | ###### Header 6 |
+---------------------+-----------------+


## [Lists](https://quarto.org/docs/authoring/markdown-basics.html#lists)

::: small

+-------------------------------------+---------------------------------+
| Markdown Syntax                     | Output                          |
+=====================================+=================================+
|     * unordered list                | -   unordered list              |
|         + sub-item 1                |                                 |
|         + sub-item 2                |     -   sub-item 1              |
|             - sub-sub-item 1        |                                 |
|                                     |     -   sub-item 2              |
|                                     |                                 |
|                                     |         -   sub-sub-item 1      |
+-------------------------------------+---------------------------------+
|     *   item 2                      | -   item 2                      |
|         <new line>                  |                                 |
|         Continued (indent 4 spaces) |     Continued (indent 4 spaces) |
+-------------------------------------+---------------------------------+
|     1. ordered list                 | 1.  ordered list                |
|     2. item 2                       |                                 |
|         i) sub-item 1               | 2.  item 2                      |
|              A.  sub-sub-item 1     |                                 |
|                                     |     i.  sub-item 1              |
|                                     |                                 |
|                                     |         A.  sub-sub-item 1      |
+-------------------------------------+---------------------------------+

:::



:::  notes
At least two spaces


- Lists in Quarto require an *entire blank line* above the list.

wefjwrg
- list
- abc

:::


## [Math and Links](https://quarto.org/docs/authoring/markdown-basics.html#equations)

::: columns

::: {.column width="50%"}

**Markdown syntax**

```{.markdown code-line-numbers="false"}
inline-math: $A = r^{2}$
```
<!-- inline-math: \$A = r\^{2}\$\ -->
<br>

```{.markdown code-line-numbers="false"}
math-block: 

$$A = r^{2}$$
```
<br>

\<https://www.google.com \> <br>

<br> \[Google link\](https://www.google.com)

:::

::: {.column width="50%"}

**Output**

inline-math: $A = r^{2}$\
<br> math-block: $$A = r^{2}$$ <br> <https://www.google.com>\
<br> [Google link](https://www.google.com)\
<br>

:::

:::



## [Tables](https://quarto.org/docs/authoring/markdown-basics.html#tables)

::: columns

::: {.column width="50%"}

    | Right | Left | Default | Center |
    |------:|:-----|---------|:------:|
    |   12  |  12  |    12   |    12  |
    |  123  |  123 |   123   |   123  |
    |    1  |    1 |     1   |     1  |
    
:::

::: {.column width="50%"}

| Right | Left | Default | Center |
|------:|:-----|---------|:------:|
|    12 | 12   | 12      |   12   |
|   123 | 123  | 123     |  123   |
|     1 | 1    | 1       |   1    |

:::

:::


## Grid tables^[If you prefer, you can use **visual** editing mode instead of **source** mode.]   {visibility="hidden"}

    +---------------+---------------+--------------------+
    | Fruit         | Price         | Advantages         |
    +===============+===============+====================+
    | Bananas       | $1.34         | - built-in wrapper |
    |               |               | - bright color     |
    +---------------+---------------+--------------------+
    | Oranges       | $2.10         | - cures scurvy     |
    |               |               | - tasty            |
    +---------------+---------------+--------------------+

    : Sample grid table.

+---------------+---------------+----------------------+
| Fruit         | Price         | Advantages           |
+===============+===============+======================+
| Bananas       | \$1.34        | -   built-in wrapper |
|               |               | -   bright color     |
+---------------+---------------+----------------------+
| Oranges       | \$2.10        | -   cures scurvy     |
|               |               | -   tasty            |
+---------------+---------------+----------------------+

: Sample grid table.




## Source vs. Visual Mode

**Source Mode**

```{r}
#| out-width: 100%
knitr::include_graphics("images/05-quarto/mode-source-1.png")
```

[**Visual Mode**](https://quarto.org/docs/visual-editor/) (What You See Is What You Mean (WYSIWYM))

```{r}
#| out-width: 100%
knitr::include_graphics("images/05-quarto/mode-visual-1.png")
```

<!-- . . . -->

<!-- ```{r} -->
<!-- #| out-width: 80% -->
<!-- knitr::include_graphics("images/05-quarto/visualmode.png") -->
<!-- ``` -->



## Data as Table {visibility="hidden"}

`knitr::kable()` can turn dataframes into tables.


```{r}
#| echo: true
head(mtcars) |> 
    knitr::kable()
```


##

::: lab

<span style="color:blue"> **03-Markdown** </span>

Back to your **lab.qmd**. In `## Lab 3: Markdown` section, 

- Add a self-introduction paragraph containing a header, **bold** and *italic* text.

- Add another paragraph that contains
  - listed items
  - a hyperlink
  - a blockquote
  
- Once done, **commit** with message [_"03-markdown"_]{style="color:green"} and **push** it to GitHub.
:::


# Code

## Anatomy of a Code Chunk

:::: {.columns}

::: {.column width="35%"}


```{r}
#| label: car-stuff
#| echo: fenced
#| eval: false
mtcars |> 
  distinct(cyl)
```

<br>

```{python}
#| label: string
#| echo: fenced
#| eval: false
x = 'hello, python world!'
print(x.split(' '))
```


:::

::: {.column width="65%"}

- Has 3x backticks  ```` ``` ````  on each end


- To insert a code chunk, 

```{r}
#| out-width: 10%
knitr::include_graphics("./images/05-quarto/insert_icon26.png")
```

- `Alt + Ctrl + I` (Win) ; `Option + Cmd + I` (Mac)

- Indicate engine `r`, `python` between curly braces `{` `}`  

- Place options behind the `#|` (hashpipe): `#| option: value`  

- **Tools > Modify Keyboard Shortcuts > Filter... > Insert Chunk Python >** `Option + Cmd + P` (or any key binding you like)

:::

::::






## Option `echo` and `eval`

- By default, the code in the code chunk will be shown in the rendered document and evaluated, and the output will be printed as well.

    ```{{python}}
    #| echo: true
    #| eval: true
    pet = ['dog', 'cat', 'cat']; pet.count('cat')
    ```
```{python}
#| echo: true
#| eval: true
pet = ['dog', 'cat', 'cat']; pet.count('cat')
```

. . .

- `echo: false` would instead hide the code but still evaluate it.

    ```{{python}}
    #| echo: false
    pet = ['dog', 'cat', 'cat']; pet.count('cat')
    ```

```{python}
#| echo: false
#| eval: true
pet = ['dog', 'cat', 'cat']; pet.count('cat')
```

. . .

::: question

What should we do if we want to show the code but not evaluate it?

:::

::: notes

- Show the code but not evaluate it.

    ```{{python}}
    #| echo: true
    #| eval: false
    pet = ['dog', 'cat', 'cat']; pet.count('cat')
    ```

```{python}
#| echo: true
#| eval: false
pet = ['dog', 'cat', 'cat']; pet.count('cat')
```


:::

<!-- ```{r} -->
<!-- #| echo: false -->
<!-- #| eval: false -->
<!-- 1 + 1 -->
<!-- ``` -->

<!-- ```{{r}} -->
<!-- #| echo: true -->
<!-- 1 + 1 -->
<!-- ``` -->

<!-- . . . -->

<!-- ```{r} -->
<!-- #| echo: true -->
<!-- 1 + 1 -->
<!-- ``` -->


<!--     ```{{python}} -->
<!--     #| echo: true -->
<!--     fruits = ['dog', 'cat', 'cat'] -->
<!--     fruits.count('cat') -->
<!--     ``` -->

<!-- . . . -->

<!-- ```{python} -->
<!-- #| echo: true -->
<!-- fruits = ['dog', 'cat', 'cat'] -->
<!-- fruits.count('cat') -->
<!-- ``` -->

## [Chunk Options](https://quarto.org/docs/reference/cells/cells-knitr.html)

- The following table summarises which types of output each option [**suppresses**]{.red}

|Option            | Run code | Show code | Output | Plots | Messages | Warnings |
|:---------------- |:--------:|:---------:|:------:|:-----:|:--------:|:--------:|
|`eval: false`     | ❌        |           | ❌      |  ❌   | ❌      | ❌   | 
|`include: false`  |          | ❌         | ❌   | ❌  | ❌     | ❌   |
|`echo: false`     |          | ❌         |        |       |          |          |
|`results: "hide"` |          |           | ❌      |       |          |          |
|`fig-show: "hide"`|          |           |        | ❌     |          |          |
|`message: false`  |          |           |        |       | ❌     |          |
|`warning: false`  |          |           |        |       |          | ❌       |

- Check [Code Cells: Knitr](https://quarto.org/docs/reference/cells/cells-knitr.html) for more chunk options.


::: notes

- Here shows some code chunk options. 
- The table summarises which types of output each option **suppresses**.
- So eval = FALSE means that the code is not run, but the code is still shown in the compiled document. Because the code is not run, there will be no output, no plots, no messages and no warnings.
- When include = FALSE, the code will be run, but nothing will be included in the final document.
- When echo = FALSE, the code will not be shown in the document, but it will be run, and all results will be shown in the document.
- You get the idea, right. 
- So results controls output, fig.show controls plots, message and warning control if messages and warnings are shown.
- There are so many chunk options out there. If you want to learn more, definitely check this knitr website. OK

:::



## Global Options: execute

- Should be specified within the `execute` key. 

```{r}
#| fig-width: 2
knitr::include_graphics("images/05-quarto/globaloption.png")
```


``` yaml
---
execute: 
  echo: false
  eval: false
---
```

::: {.callout-warning}

Be careful about global options in our `lab.qmd`!

:::

- Check [HTML Options > Execution](https://quarto.org/docs/reference/formats/html.html#execution) for more execution options!





::: notes

````md
```{{r}}
#| label: setup
#| include: false
# don't show code unless we explicitly set echo = TRUE
knitr::opts_chunk$set(echo = FALSE)
```
````

- `knitr::opts_chunk$set()` sets default options for all chunks.

:::



## Images {visibility="hidden"}


Basic markdown syntax:

    ![Maru](images/05-quarto/maru1.jpg)

![Maru](images/05-quarto/maru1.jpg)


## Figures w/ code

```{r}
#| echo: fenced
#| out-width: 40%
#| fig-align: right

knitr::include_graphics("images/05-quarto/maru1.jpg")
```

::: notes
Width of the plot in the output document, which can be different from its physical fig-width, i.e., plots can be scaled in the output document. When used without a unit, the unit is assumed to be pixels. However, any of the following unit identifiers can be used: px, cm, mm, in, inch and %, for example, 3in, 8cm, 300px or 50%.
:::



## Including Plots

- Many chunk options for figures and images start with `fig-`, for example `fig-width`, `fig-height`, `fig-show`, etc.

<br>

:::: {.columns}

::: {.column width="45%"}

```{r}
#| echo: fenced
#| eval: false
#| fig-cap: "Fig. 1: Car stuff"

plot(x = cars$speed, y = cars$dist)
```

:::


::: {.column width="55%"}

```{r}
#| fig-align: center
#| fig-cap: "Fig. 1: Car stuff"
plot(x = cars$speed, y = cars$dist)
```

:::

::::



## [Divs and Spans](https://quarto.org/docs/authoring/markdown-basics.html#sec-divs-and-spans) {visibility="hidden"}

    This is text with [special]{style="color:red"} formatting.

This is text with [special]{style="color:red"} formatting.

<br>


    ::: {style="color:red"}
    This content can be styled with a border
    :::



::: {style="color:red"}
This content can be styled with a border
:::


<!-- . . . -->

<!-- ### Divs and Spans -->

<!-- -   Think of a `:::` div as a HTML `<div>` but it can also apply in specific situations to content in PDF -->
<!-- -   `[text]{.class}` spans can be thought of a `<span .class>Text</span>` -->


<!--     ```markdown -->
<!--     ::: {.border} -->
<!--     This content can be styled with a border -->
<!--     ::: -->

<!--     <div class="border"> -->
<!--       <p>This content can be styled with a border</p> -->
<!--     </div> -->
<!--     ``` -->


::: notes
    <!-- ::: {style="border-left:10px solid red"} -->
    <!-- This content can be styled with a border -->
    <!-- ::: -->
Divs start with a fence containing at least three consecutive colons plus some attributes. The attributes may optionally be followed by another string of consecutive colons. The Div ends with another line containing a string of at least three consecutive colons. The Div should be separated by blank lines from preceding and following blocks.

:::

<!-- ## -->

<!-- ::: callout-note -->
<!-- Note that there are five types of callouts, including: -->
<!-- ::: -->

## Subfigures Fenced div Class {visibility="hidden"}

    ::: {#fig-maru layout-ncol=2}
    
    ![Loaf](images/05-quarto/maru2.jpg){#fig-loaf width="250px"}
    ![Lick](images/05-quarto/maru3.jpg){#fig-lick width="250px"}
    Two states of Maru
    
    :::
    

::: {#fig-maru layout-ncol=2}

![Loaf](images/05-quarto/maru2.jpg){#fig-loaf width="350px"}

![Lick](images/05-quarto/maru3.jpg){#fig-lick width="350px"}

Two states of Maru

:::



## Inline Code

- Inside your text you can include code with the syntax <span>&#96;</span>r your-r-code&#96;.

- For example, <span>&#96;</span>r 4 + 5&#96; would output `r 4 + 5` in your text.

<!-- - `{python} 4 + 5` -->

<!-- - `{{< python 4+4 >}}` -->

```{r}
#| echo: true
head(cars)
num_cars <- nrow(cars)
```

. . .


:::: {.columns}

::: {.column width="50%"}

**Code in Quarto**

There are <span>&#96;</span>r num_cars&#96; rows in the `cars` dataset. Four plus five is <span>&#96;</span>r 4 + 5&#96;

:::



::: {.column width="50%"}

**Output**

There are `r num_cars` rows in the `cars` dataset. Four plus five is `r 4 + 5`



:::

:::::


::: notes

- We;ve learned that Inside your text you can include code, and inline code is created with backticks. 
- In fact, the inline code can actually execute code, if we put r in the first place.
- For example, `r 4 + 5` would output 9 in your text.

:::




##

::: {.lab}

<span style="color:blue"> **04-Code Chunk** </span>

In **lab.qmd** `## Lab 4: Code Chunk`, use code chunks to

- Include an image <https://shorturl.at/IJy1v> using `knitr::include_graphics("URL or file path")`
  
  
- Include a plot `plot(mtcars$disp, mtcars$mpg)`
   + Add option `fig-height: 4`, `fig-width: 6` and `fig-align: right` to the chunk for your plot. What are the changes?
  
  <!-- - Show dataset `mtcars` as a table using `knitr::kable()` -->
  
<!-- - Do some inline code calculation like <span>&#96;</span>r ncol(mtcars)&#96;, <span>&#96;</span>r log(100, base = 10) + sqrt(4)&#96;. -->


  
<!-- - How do we set global chunk options to not show the code in every chunk in the document? -->

- Once done, **commit** with message [_"04-codechunk"_]{style="color:green"} and **push** your work to GitHub.

:::




::: notes
- Run the following in the console
# ```{r}
# #| eval: false
# z <- 2
# z * 3
# ```
Then, add the following chunk in your **lab02-rmarkdown.qmd** and re-knit it.
# ```{r}
# #| eval: false
# z * 3
# ```
What happens?
- The environment of your Quarto document is separate from the Console! Remember this, and expect it to bite you a few times as you're learning to work with Quarto!
- fig.dim = c(8, 6) means fig.width = 8 and fig.height = 6 in inches
- out.width="50%": half of the width of the image container
<!-- - The workspace of your Quarto document is separate from the Console! -->
:::


##

::: genai

<span style="color:green"> **04-Code Chunk** </span>


> `>` How do we collapse the code by default in a Quarto HTML document, and show them when needed?

> `>` We have a data set `mtcars`. How do we show the data set as a good-looking table using R in Quarto? 

> `>` I want to use the 2-column format in my Quarto. Teach me with a short example.

<br>

- Share what you learned from AI!~

:::


::: notes


<!-- --- -->
<!-- title: "Two-Column Layout Example" -->
<!-- format: html -->
<!-- --- -->

<!-- ::: {.columns} -->

<!-- ::: {.column width="50%"} -->
<!-- ### Left Column -->
<!-- Here is some text in the **left column**. -->

<!-- You can include: -->
<!-- - Paragraphs -->
<!-- - Images -->
<!-- - Code blocks -->
<!-- - Tables -->
<!-- ::: -->

<!-- ::: {.column width="50%"} -->
<!-- ### Right Column -->
<!-- Here is some text in the **right column**. -->

<!-- For example, a code chunk: -->

<!-- ```{r} -->
<!-- summary(mtcars) -->
<!-- ``` -->
<!-- ::: -->

<!-- ::: -->

:::

## Quarto Skills to the Next Level 

- [Quarto Website](https://quarto.org/)

- [Get Started with Quarto](https://rstudio-conf-2022.github.io/get-started-quarto/)

- [R for Data Science Ch-28 Quarto](https://r4ds.hadley.nz/quarto.html)
